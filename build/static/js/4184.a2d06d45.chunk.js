"use strict";(self.webpackChunkyogeek=self.webpackChunkyogeek||[]).push([[4184],{2282:(e,s,a)=>{a.r(s),a.d(s,{default:()=>I});var r=a(2791),t=a(7689),c=a(2892),i=a(9434),n=a(4564),o=a(5089),l=a(3220),d=a(953),m=a(7531),u=a(1087),h=a(1663),x=a(6704),j=a(2506),v=a(5864),g=a(7318),y=a(184);const N=e=>{let{subcategories:s}=e;const a=e=>{if("string"!==typeof e)return"Invalid date";const s=new Date(e);return isNaN(s.getTime())?"Invalid date":(0,h.Z)(s,{addSuffix:!0,locale:x.Z})};return(0,y.jsx)(y.Fragment,{children:s.map((e=>(0,y.jsxs)("div",{className:"forum-sub-category",children:[(0,y.jsx)("div",{className:"forum-sub-category-col1",children:(0,y.jsxs)("div",{className:"forum-sub-category-info",children:[(0,y.jsx)("div",{className:"forum-sub-category-icon",children:(0,y.jsx)(j.r,{})}),(0,y.jsxs)("div",{className:"forum-sub-category-title-desc",children:[(0,y.jsx)(u.rU,{to:"/forum/subcategory/".concat(e.id,"/").concat(e.name),children:(0,y.jsx)("h5",{children:e.name})}),(0,y.jsx)("span",{children:e.description})]})]})}),(0,y.jsxs)("div",{className:"forum-sub-category-col2",children:[(0,y.jsxs)("div",{className:"view-reply-counter",children:[(0,y.jsxs)("div",{className:"reply-counter",children:[(0,y.jsx)("div",{className:"reply-msg-icon",children:(0,y.jsx)(v.r,{})}),(0,y.jsx)("span",{children:e.totalPosts})]}),(0,y.jsxs)("div",{className:"view-counter",children:[(0,y.jsx)("div",{className:"view-msg-icon",children:(0,y.jsx)(g.r,{})}),(0,y.jsx)("span",{children:e.totalViews})]})]}),(0,y.jsx)("span",{className:"last-activity-time",children:e.latestPost?a(e.latestPost):"no activity"})]})]},e.id)))})};var f=a(3545),p=a(8290);a(5862),a(7556);const b=e=>{let{menus:s}=e;return Array(s).fill(0).map(((e,s)=>(0,y.jsx)(p.Z,{height:34,width:650})))},w=e=>{let{menus:s}=e;return Array(s).fill(0).map(((e,s)=>(0,y.jsx)(p.Z,{height:74})))};var k=a(5219),Z=a(4781),S=a(8558),C=a(9401);const I=()=>{var e,s;const a=(0,i.I0)(),u=(0,i.v9)((e=>e.forumcategories.data)),h=(0,t.s0)(),x=(0,r.useRef)(),[j,v]=(0,r.useState)(!0),[g,p]=(0,r.useState)(!1),[I,M]=(0,r.useState)([]),[D,_]=(0,r.useState)([]),[E,F]=(0,r.useState)(1),[P]=(0,r.useState)(10),[R,A]=(0,r.useState)(!0),B=["Most Recent","Most Viewed","Most Liked"].map((e=>({label:e,value:e.toLowerCase()})));(0,r.useEffect)((()=>{u?v(!1):(v(!0),a((0,n.y)()))}),[a,u]),(0,r.useEffect)((()=>{(async()=>{if(!g&&R){p(!0);try{const e=(await c.Z.get("/api/get-all-discussions/?page=".concat(E,"&limit=").concat(P))).data;M((s=>{const a=e.filter((e=>!s.some((s=>s.discussion_id===e.discussion_id))));return[...s,...a]})),A(e.length>0)}catch(e){console.error("Error fetching recent discussions:",e)}finally{p(!1)}}})()}),[E,P]);const L=[...I].sort(((e,s)=>new Date(s.created_at)-new Date(e.created_at))),O=[...I].sort(((e,s)=>{const a=e.post.reduce(((e,s)=>e+(s.views||0)),0);return s.post.reduce(((e,s)=>e+(s.views||0)),0)-a})),U=[...I].sort(((e,s)=>{const a=Math.max(...e.post.map((e=>e.likes?e.likes.length:0)));return Math.max(...s.post.map((e=>e.likes?e.likes.length:0)))-a}));return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(o.Z,{}),(0,y.jsx)("div",{className:"language-selector-container",children:(0,y.jsx)(f.Z,{})}),(0,y.jsx)("div",{className:"home-search-box-container",children:(0,y.jsx)(m.Z,{className:"custom-forum-search-box"})}),(0,y.jsx)("div",{className:"smallscreennavmenu-container",children:(0,y.jsx)(S.Z,{})}),(0,y.jsxs)("div",{className:"forum-categories-container",children:[(0,y.jsx)("h1",{children:"Welcome to Yogeek Community"}),(0,y.jsx)("div",{className:"browse-by-category",children:(0,y.jsxs)("div",{className:"browse-by-category-container",children:[(0,y.jsx)("div",{className:"browse-by-category-row1",children:(0,y.jsx)("h5",{children:"Browse by Category "})}),(0,y.jsx)("div",{className:"browse-by-category-row2",children:(0,y.jsxs)("div",{className:"browse-by-category-row2-col1",children:[j&&(0,y.jsx)(b,{menus:8}),null===u||void 0===u||null===(e=u.categories)||void 0===e?void 0:e.map((e=>(0,y.jsxs)("button",{className:"forum-categories-nav-menu",onClick:()=>{return s=e.id,a=e.name,void h("/forum/category/".concat(s,"/").concat(a));var s,a},children:[(0,y.jsx)("div",{className:"category-general-discussion-icon",children:(0,y.jsx)("img",{src:e.icon,alt:""})}),e.name.toUpperCase()]},e.id)))]})})]})}),(0,y.jsxs)("div",{className:"forum-container",children:[(0,y.jsx)("div",{className:"start-discussion-btn-container",children:(0,y.jsx)(d.Z,{label:"Start a discussion"})}),(0,y.jsxs)("div",{className:"listed-category-container",children:[j&&(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(w,{menus:10})}),null===u||void 0===u||null===(s=u.categories)||void 0===s?void 0:s.map((e=>(0,y.jsxs)("div",{className:"listed-category",children:[(0,y.jsx)("div",{className:"listed-category-title",children:(0,y.jsx)("h4",{children:e.name})}),(0,y.jsx)(N,{subcategories:e.subcategories})]},e.id)))]})]}),(0,y.jsxs)("div",{className:"home-recent-discussions",children:[(0,y.jsxs)("div",{className:"recent-discussions",children:[(0,y.jsx)("h5",{children:"Recent Discussions"}),(0,y.jsxs)("div",{className:"replies-sortby-container",children:[(0,y.jsx)("span",{style:{flexShrink:"0",fontWeight:500},children:"Sort By:"}),(0,y.jsx)(Z.Z,{data:B,onOptionSelect:e=>{"most recent"===e.value&&_(L),"most viewed"===e.value&&_(O),"most liked"===e.value&&_(U)},className:"forum-sortby-dropdown-select"})]})]}),(0,y.jsx)(k.Z,{data:D.length>0?D:L})]}),R&&!g&&(0,y.jsx)("div",{ref:e=>{g||(x.current&&x.current.disconnect(),x.current=new IntersectionObserver((e=>{e[0].isIntersecting&&F((e=>e+1))})),e&&x.current.observe(e))},style:{height:"20px",backgroundColor:"transparent"}}),g&&(0,y.jsx)("div",{className:"infinite-scroll-loading-spinner",children:(0,y.jsx)(C.r,{})}),!R&&(0,y.jsx)("div",{className:"no-more-data",children:"No more data to load"})]}),(0,y.jsx)(l.Z,{className:"home-footer"})]})}}}]);
//# sourceMappingURL=4184.a2d06d45.chunk.js.map
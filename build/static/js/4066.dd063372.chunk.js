"use strict";(self.webpackChunkyogeek=self.webpackChunkyogeek||[]).push([[4066],{5470:(e,s,a)=>{a.d(s,{Z:()=>c});a(2791),a(5509);var t=a(184);const c=e=>{let{label:s,onClick:a,className:c,active:i}=e;return(0,t.jsx)("button",{className:"category-button ".concat(i?"active":""," ").concat(c),onClick:a,children:s})}},7956:(e,s,a)=>{a.d(s,{Z:()=>d});var t=a(1087),c=a(1663),i=a(6704),n=a(2506),o=a(5864),r=a(7318),l=a(184);const d=e=>{let{data:s}=e;const a=s.subcategories.map((e=>{const a=s.allDiscussions.filter((s=>s.forum_category_id===e.id));let t=[];a.forEach((e=>{t=[...t,...e.post],e.post.forEach((e=>{t=[...t,...e.replies]}))}));const c=(e=>{let s=null;const a=e=>{var t;(!s||new Date(null===e||void 0===e?void 0:e.created_at)>new Date(null===(t=s)||void 0===t?void 0:t.created_at))&&(s=e),e.replies.forEach(a)};return e.forEach(a),s})(t),i=a.reduce(((e,s)=>e+(s.post?s.post.length:0)+(e=>{let s=0;const a=e=>{s+=e.replies.length,e.replies.forEach(a)};return e.forEach(a),s})(s.post)),0),n=a.reduce(((e,s)=>{var a;return e+((null===(a=s.post[0])||void 0===a?void 0:a.views)||0)}),0);return{...e,discussions:a,totalPosts:i,totalViews:n,latestPost:c}}));console.log(a);const d=e=>{if("string"!==typeof e)return"Invalid date";const s=new Date(e);return isNaN(s.getTime())?"Invalid date":(0,c.Z)(s,{addSuffix:!0,locale:i.Z})};return(0,l.jsx)(l.Fragment,{children:a.map((e=>{var s;return(0,l.jsxs)("div",{className:"forum-sub-category",children:[(0,l.jsx)("div",{className:"forum-sub-category-col1",children:(0,l.jsxs)("div",{className:"forum-sub-category-info",children:[(0,l.jsx)("div",{className:"forum-sub-category-icon",children:(0,l.jsx)(n.r,{})}),(0,l.jsxs)("div",{className:"forum-sub-category-title-desc",children:[(0,l.jsx)(t.rU,{to:"/forum/subcategory/".concat(e.id,"/").concat(e.name),children:(0,l.jsx)("h5",{children:e.name})}),(0,l.jsx)("span",{children:e.description})]})]})}),(0,l.jsx)("div",{className:"forum-sub-category-col2",children:(0,l.jsxs)("div",{className:"view-reply-counter",children:[(0,l.jsxs)("div",{className:"reply-counter",children:[(0,l.jsx)("div",{className:"reply-msg-icon",children:(0,l.jsx)(o.r,{})}),(0,l.jsx)("span",{children:e.totalPosts})]}),(0,l.jsxs)("div",{className:"view-counter",children:[(0,l.jsx)("div",{className:"view-msg-icon",children:(0,l.jsx)(r.r,{})}),(0,l.jsx)("span",{children:e.totalViews})]}),(0,l.jsx)("span",{className:"last-activity-time",children:e.discussions.length>0?d(null===(s=e.latestPost)||void 0===s?void 0:s.created_at):"no activity"})]})})]},e.id)}))})}},4601:(e,s,a)=>{a.d(s,{Z:()=>j});var t=a(2791),c=a(2892),i=a(9434),n=a(4564),o=a(7385),r=a(7689),l=a(1087),d=a(5143),u=a(4781),m=a(5470),f=a(7145),h=a(8290),g=(a(5862),a(7556),a(184));const p=e=>{let{menus:s}=e;return Array(s).fill(0).map(((e,s)=>(0,g.jsx)(h.Z,{height:35,width:205,className:"side-nav-categories"})))};var x=a(1842);const j=e=>{var s;let{createdDiscussionsTab:a,joinedDiscussionsTab:h,userActivityTab:j,forumNotificationsTab:v,addDiscussionsBtn:y,discussionFilter:N,createdDiscussionsData:b,joinedDiscussionsData:w,activitiesData:k,paramsUserData:C,notifications:D,sortOptions:E,onOptionSelect:_,emptySortDiscussions:S,className:Z}=e;const A=(0,i.I0)(),T=(0,i.v9)((e=>e.user.data)),O=(0,i.v9)((e=>e.forumcategories.data)),F=(0,i.v9)((e=>e.forumtags.data)),{userId:I,tab:P}=(0,r.UO)(),U=Number(I),J=Number(null===T||void 0===T?void 0:T.id),L=(0,r.s0)(),G=(0,r.TH)(),[R,B]=(0,t.useState)(N),[V,W]=(0,t.useState)([]),[Y,H]=(0,t.useState)(Array.isArray(G.state)?G.state:[]),[q,z]=(0,t.useState)(!1),[K,M]=(0,t.useState)({}),[Q,X]=(0,t.useState)(0),[$,ee]=(0,t.useState)(0),[se,ae]=(0,t.useState)({}),[te,ce]=(0,t.useState)(!0),[ie,ne]=(0,t.useState)(!0),[oe,re]=(0,t.useState)(!1);(0,t.useEffect)((()=>{O?ce(!1):(ce(!0),A((0,n.y)()))}),[A,O]),(0,t.useEffect)((()=>{0===F.length?(ne(!0),A((0,o.l)())):ne(!1)}),[A,F]),(0,t.useEffect)((()=>{G.state&&G.state.selectedTags&&H(G.state.selectedTags)}),[G.state]),(0,t.useEffect)((()=>{(async()=>{try{const e=await c.Z.get("/api/user/".concat(I)),{id:s,display_name:a,profile_pic:t,createdAt:i}=e.data;M({id:s,display_name:a,profile_pic:t,createdAt:i}),C(e.data)}catch(e){console.log("Error fetching data:",e)}})()}),[I,C]),(0,t.useEffect)((()=>{null===V&&W(O[0].id)}),[O,V]),(0,t.useEffect)((()=>{(async()=>{try{const e=await c.Z.get("/api/".concat(I,"/created/discussion")),s=e.data.sort(((e,s)=>new Date(s.created_at)-new Date(e.created_at)));X(e.data.length),b(s)}catch(e){console.log("Error fetching user created discussions:",e)}})()}),[I,b]),(0,t.useEffect)((()=>{(async()=>{try{const e=await c.Z.get("/api/".concat(I,"/joined/discussion")),s=e.data.sort(((e,s)=>new Date(s.created_at)-new Date(e.created_at)));ee(e.data.length),w(s)}catch(e){console.log("Error fetching user created discussions:",e)}})()}),[I,w]),(0,t.useEffect)((()=>{(async()=>{try{const e=(await c.Z.get("/api/forum-activities/".concat(I))).data.sort(((e,s)=>new Date(s.createdAt)-new Date(e.createdAt)));k(e)}catch(e){console.log("Error fetching forum activities:",e)}})()}),[I,k]),(0,t.useEffect)((()=>{(async()=>{try{const e=await c.Z.get("/api/total-forum-notifications");ae(e.data)}catch(e){console.log("Error fetching total unread notifications",e)}})()}),[D]),(0,t.useEffect)((()=>{switch(P){case"created_discussions":a(),B(!0);break;case"joined_discussions":h(),B(!0);break;case"user_activity":j(),B(!1);break;case"notifications":v(),B(!1);break;case"add_discussions":y(),B(!1)}}),[P,L,a,h,j,v,y]);const le=()=>{L("/forum/profile/".concat(I,"/created_discussions")),a()},de=()=>{L("/forum/profile/".concat(I,"/joined_discussions")),h()},ue=()=>{L("/forum/profile/".concat(I,"/user_activity")),j()},me=()=>{L("/forum/profile/".concat(I,"/notifications")),v()},fe=()=>{"function"===typeof S&&S([])},he=()=>{re((e=>!e))},ge=()=>{z((e=>!e))},pe=(null===K||void 0===K?void 0:K.createdAt)||"",xe=new Date(pe).toLocaleDateString("en-US",{year:"numeric",month:"long"});return(0,g.jsxs)(g.Fragment,{children:[oe&&(0,g.jsx)(x.Z,{onClick:he}),q&&(0,g.jsx)(f.Z,{onClick:ge,tagsData:F}),(0,g.jsxs)("div",{className:"forum-category-page-filter-nav ".concat(Z),children:[T?(0,g.jsx)(g.Fragment,{children:I&&(0,g.jsxs)("div",{className:"forum-category-page-row1",children:[(0,g.jsxs)("div",{className:"forum-category-page-row1-row1",children:[(0,g.jsx)("img",{src:K.profile_pic||d,alt:"",className:"forum-profile-pic"}),(0,g.jsxs)("div",{className:"user-display-name",children:[(0,g.jsx)("p",{children:K.display_name}),(0,g.jsxs)("small",{children:["Joined in\xa0",xe]})]})]}),(0,g.jsxs)("ul",{className:"forum-profile-menu",children:[(0,g.jsxs)("li",{onClick:le,children:["Created Discussions ",(0,g.jsxs)("span",{className:"forum-activity-counter",children:["(",Q,")"]})]}),(0,g.jsxs)("li",{onClick:de,children:["Joined Discussions ",(0,g.jsxs)("span",{className:"forum-activity-counter",children:["(",$,")"]})]}),(0,g.jsx)("li",{onClick:ue,children:"Latest Activity"}),J===U?(0,g.jsxs)("li",{onClick:me,className:"forum-notifications",children:["Notifications ",se.totalCount>0&&(0,g.jsx)("div",{className:"forum-notification-counter",children:se.totalCount})]}):null]})]})}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"forum-category-page-row1 not-authenticated",children:[(0,g.jsx)("p",{children:"Join our community, elevate your marketplace experience!"}),(0,g.jsx)("button",{type:"button",className:"forum-login-btn",onClick:he,children:"Sign In"}),(0,g.jsxs)("p",{children:["Don\u2019t have a Yogeek account? ",(0,g.jsx)(l.rU,{to:"/registerbyemail",children:"Sign up"})]})]}),I&&(0,g.jsxs)("div",{className:"forum-category-page-row1",children:[(0,g.jsxs)("div",{className:"forum-category-page-row1-row1",children:[(0,g.jsx)("img",{src:K.profile_pic||d,alt:"",className:"forum-profile-pic"}),(0,g.jsxs)("div",{className:"user-display-name",children:[(0,g.jsx)("p",{children:K.display_name}),(0,g.jsxs)("small",{children:["Joined in\xa0",xe]})]})]}),(0,g.jsxs)("ul",{className:"forum-profile-menu",children:[(0,g.jsxs)("li",{onClick:le,children:["Created Discussions ",(0,g.jsxs)("span",{className:"forum-activity-counter",children:["(",Q,")"]})]}),(0,g.jsxs)("li",{onClick:de,children:["Joined Discussions ",(0,g.jsxs)("span",{className:"forum-activity-counter",children:["(",$,")"]})]}),(0,g.jsx)("li",{onClick:ue,children:"Latest Activity"}),J===U?(0,g.jsxs)("li",{onClick:me,className:"forum-notifications",children:["Notifications ",se.totalCount>0&&(0,g.jsx)("div",{className:"forum-notification-counter",children:se.totalCount})]}):null]})]})]}),R&&(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{className:"forum-sortby",children:[(0,g.jsx)("label",{children:"SORT BY"}),(0,g.jsx)(u.Z,{data:E,onOptionSelect:_,className:"forum-sortby-dropdown-select"})]})}),(0,g.jsxs)("div",{className:"forum-category-page-row2",children:[(0,g.jsx)("div",{className:"section-label-container",children:(0,g.jsx)("label",{children:"CATEGORIES"})}),(0,g.jsxs)("div",{className:"forum-category-btn-container",children:[te&&(0,g.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"3px"},children:(0,g.jsx)(p,{menus:8})}),null===O||void 0===O||null===(s=O.categories)||void 0===s?void 0:s.map((e=>(0,g.jsx)(l.OL,{activeclassname:"active",className:"forum-category-menu",to:"/forum/category/".concat(e.id,"/").concat(e.name),onClick:fe,children:e.name},e.id)))]})]}),(0,g.jsxs)("div",{className:"forum-category-page-row3",children:[(0,g.jsx)("div",{className:"section-label-container",children:(0,g.jsx)("label",{children:"POPULAR TAGS"})}),(0,g.jsxs)("div",{className:"forum-category-btn-container",children:[ie&&(0,g.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"3px"},children:(0,g.jsx)(p,{menus:8})}),F.slice(0,10).map((e=>(0,g.jsx)(m.Z,{onClick:()=>{return s=e.id,void H((e=>{const a=e.includes(s)?e.filter((e=>e!==s)):[...e,s];return"function"===typeof S&&S([]),L("/forum/filtertags",{state:{selectedTags:a}}),a}));var s},label:e.name,className:"tag-btn ".concat(Y.includes(e.id)?"active":"")},e.id))),(0,g.jsxs)("div",{className:"more-tags",style:{justifyContent:Y.length>0?"space-between":"end"},children:[Y&&Y.length>0&&(0,g.jsx)("button",{onClick:()=>{const e=[];H(e),L("/forum/filtertags",{state:{selectedTags:e}})},children:"Clear all"}),(0,g.jsx)("button",{onClick:ge,children:"Select more tags"})]})]})]})]})]})}},7385:(e,s,a)=>{a.d(s,{l:()=>i});var t=a(672),c=a(2892);const i=()=>async e=>{try{const s=await c.Z.get("/api/fetchforumtags");if(200===s.status){const a=s.data;e((0,t.mG)(a))}}catch(s){console.error("Error fetching forum tags:",s),e((0,t.sT)("Error fetching forum tags."))}}},9326:()=>{}}]);
//# sourceMappingURL=4066.dd063372.chunk.js.map
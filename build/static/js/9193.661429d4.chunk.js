"use strict";(self.webpackChunkyogeek=self.webpackChunkyogeek||[]).push([[9193],{6431:(s,e,i)=>{i.d(e,{Z:()=>m});var t=i(2791),a=i(1663),r=i(6704),l=i(1087),c=(i(4628),i(4015)),n=i(2267),o=i(1846),d=i(7206),h=i(184);const m=s=>{let{data:e,addToWishlist:i,removeFromWishlist:m,userId:u,wishlistCount:g,setWishlistCount:x,getWishlistCount:j}=s;const[p,w]=(0,t.useState)({}),[v,f]=(0,t.useState)({}),N=(0,t.useRef)(null);if((0,t.useEffect)((()=>{const s=s=>{!N.current||N.current.contains(s.target)||s.target.classList.contains("heart-icon")||f({})};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}}),[]),(0,t.useEffect)((()=>{(async()=>{try{const s={};e.forEach((e=>{const i=Array.isArray(e.wishlist)&&e.wishlist.some((s=>String(s.user_id)===String(u)));s[e.id]=i})),w(s)}catch(s){console.error("Error fetching data:",s)}})()}),[e,u]),!e||!Array.isArray(e)||0===e.length)return null;const y=(s,e)=>s?s.length>e?s.substring(0,e)+"...":s:"";return(0,h.jsx)(h.Fragment,{children:e.map(((s,t)=>{const S=new Date(s.createdAt);if(isNaN(S.getTime()))return console.error("Invalid date value:",s.createdAt),null;return(0,h.jsxs)("div",{className:"thumbnail-container",children:[(0,h.jsx)(l.rU,{to:"/productdetails/".concat(s.id,"/").concat(encodeURIComponent(s.product_name)),children:(0,h.jsxs)("div",{className:"image-holder",children:[s.images&&s.images[0]&&(0,h.jsx)("img",{src:s.images[0].image_url||d,alt:"Product ".concat(t),className:"product-img"}),!s.images&&(0,h.jsx)("img",{src:d,alt:"No Images Available",className:"product-img"})]})}),(0,h.jsxs)("div",{className:"product-info",children:[(0,h.jsx)(l.rU,{to:"/productdetails/".concat(s.id,"/").concat(encodeURIComponent(s.product_name)),className:"product-name",children:(0,h.jsx)("p",{children:y(s.product_name,55)})}),s.seller&&(0,h.jsxs)("small",{children:[s.seller.city||"",", ",y(s.seller.region,15)||""]}),(0,h.jsxs)("div",{className:"date-post",children:[(0,h.jsx)("div",{className:"small-clock",children:(0,h.jsx)(c.r,{})}),(0,h.jsx)("small",{children:(0,a.Z)(new Date(s.createdAt),{addSuffix:!0,locale:r.Z})})]})]}),(0,h.jsxs)("div",{className:"prod-condition-price",children:[(0,h.jsxs)("div",{className:"col-price",children:[(0,h.jsx)("small",{children:s.product_condition}),(0,h.jsx)("div",{className:"price",children:(b=s.price,new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP",minimumFractionDigits:2,maximumFractionDigits:2}).format(b).replace(/\.00$/,""))})]}),(0,h.jsxs)("div",{className:"col-wishlist",children:[v[s.id]&&!u&&(0,h.jsxs)("div",{ref:N,className:"add-wishlist-sign-in",children:[(0,h.jsx)("h6",{children:"You like this item?"}),(0,h.jsx)("p",{children:"Sign in to add this item to your wishlist"}),(0,h.jsx)(l.rU,{to:"/loginemail",children:"Sign in"})]}),(0,h.jsx)("div",{className:"wishlist-counter",children:g[s.id]||""}),(0,h.jsx)("button",{onClick:()=>(async s=>{try{const t=p[s]||!1;if(!u)return void f((e=>({...e,[s]:!e[s]})));t?await m(s):await i(s),w((e=>({...e,[s]:!e[s]})));const a={};e.forEach((s=>{a[s.id]=j(s.id)})),x(a)}catch(t){console.error("Error updating wishlist:",t)}})(s.id),className:"heart-icon",children:p[s.id]?(0,h.jsx)(o.r,{}):(0,h.jsx)(n.r,{})})]})]})]},t);var b}))})}},2366:(s,e,i)=>{i.r(e),i.d(e,{default:()=>g});var t=i(2791),a=i(9434),r=i(2892),l=i(1757),c=i(2213),n=i(1087),o=i(6593),d=i(960),h=i(6431),m=i(8580),u=i(184);const g=s=>{let{userId:e}=s;const i=(0,a.v9)((s=>s.user.data)),[g,x]=(0,t.useState)([]),[j,p]=(0,t.useState)([]),[w,v]=(0,t.useState)(!1),f=(0,a.I0)(),[N,y]=(0,t.useState)({}),[S,b]=(0,t.useState)({}),[k,E]=(0,t.useState)(1),[A,C]=(0,t.useState)(1),[W,I]=(0,t.useState)(null),[P]=(0,t.useState)(30);(0,t.useEffect)((()=>{F(k)}),[f,k]);const F=async function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;f((0,l.P)(!0));try{const e={page:s,limit:P},i=await r.Z.get("/api/getuserwishlist",{params:e});i.data.wishlist&&Array.isArray(i.data.wishlist)?(x(i.data.wishlist),I(i.data.totalWishList),C(i.data.totalPages)):console.error("Received invalid wishlist data:",i.data.wishlist);const t=await(0,c.ek)();p(t.data),f((0,l.P)(!1))}catch(e){if(f((0,l.P)(!1)),console.error("Error fetching wishlist data:",e),e.response&&500===e.response.status)return e.message;v(!0)}},U=s=>{s>=1&&s<=A&&E(s)},Z=(0,t.useMemo)((()=>Array.isArray(g)?g:[]),[g]),_=(0,t.useCallback)((s=>{const e=j.find((e=>e.id===s));return e&&e.wishlist?e.wishlist.length:0}),[j]);return(0,t.useEffect)((()=>{const s={};Z.forEach((e=>{s[e.id]=_(e.id)})),b(s),console.log("Wishlist count updated:",s)}),[N,Z,_]),(0,t.useEffect)((()=>{const s={};Z.forEach((i=>{const t=Array.isArray(i.wishlist)&&i.wishlist.some((s=>String(s.user_id)===String(e)));s[i.id]=t})),console.log("Initial Product States:",s),y(s)}),[Z,e]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.Z,{}),(0,u.jsxs)("div",{className:"container wishlist-body",children:[(0,u.jsx)("div",{className:"wishlist-row1",children:(0,u.jsxs)("ul",{className:"breadcrumb",children:[(0,u.jsx)("li",{children:(0,u.jsx)(n.rU,{to:"/",children:"Home"})}),(0,u.jsx)("li",{children:"Wishlist"})]})}),(0,u.jsxs)("div",{className:"wishlist-row2",children:[(0,u.jsxs)("div",{className:"wishlist-title",children:[(0,u.jsx)("h3",{children:"My Wishlist"}),(0,u.jsxs)("h5",{children:["You have ",W," item(s) on your wishlist"]})]}),0===W?(0,u.jsxs)("div",{className:"wishlist-empty",children:[(0,u.jsx)("div",{children:(0,u.jsx)("img",{src:m,alt:""})}),(0,u.jsx)("h4",{children:"Your Wishlist is Empty"})]}):(0,u.jsx)("div",{className:"wishlist-items",children:(0,u.jsx)(h.Z,{data:Z||[],addToWishlist:async s=>{try{const e=await(0,c.X$)(s,{});console.log(e.data)}catch(e){console.error("Error adding item to wishlist:",e)}},removeFromWishlist:async s=>{try{const e=await(0,c.EB)(s,{});console.log(e.data)}catch(e){console.error("Error removing item from wishlist:",e)}},userId:null===i||void 0===i?void 0:i.id,productStates:N,setProductStates:y,wishlistCount:S,setWishlistCount:b,getWishlistCount:_})}),W>30&&(0,u.jsxs)("div",{className:"pagination",children:[(0,u.jsx)("li",{className:"page-item",children:(0,u.jsx)("button",{onClick:()=>U(k-1),disabled:1===k,className:"page-link",children:"Previous"})}),Array.from({length:A},((s,e)=>e+1)).map((s=>(0,u.jsx)("li",{className:"page-item",children:(0,u.jsx)("button",{onClick:()=>U(s),className:s===k?"active page-link":"page-link",children:s})},s))),(0,u.jsx)("li",{className:"page-item",children:(0,u.jsx)("button",{onClick:()=>U(k+1),disabled:k===A,className:"page-link",children:"Next"})})]})]})]}),(0,u.jsx)(d.Z,{})]})}},8580:(s,e,i)=>{s.exports=i.p+"static/media/page-not-found-image.7c95b35e671fb8c61306.png"}}]);
//# sourceMappingURL=9193.661429d4.chunk.js.map
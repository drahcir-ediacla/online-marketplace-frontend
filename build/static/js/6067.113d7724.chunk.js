"use strict";(self.webpackChunkyogeek=self.webpackChunkyogeek||[]).push([[6067],{5470:(s,e,a)=>{a.d(e,{Z:()=>i});a(2791),a(5509);var t=a(184);const i=s=>{let{label:e,onClick:a,className:i,active:c}=s;return(0,t.jsx)("button",{className:"category-button ".concat(c?"active":""," ").concat(i),onClick:a,children:e})}},4601:(s,e,a)=>{a.d(e,{Z:()=>j});var t=a(2791),i=a(2892),c=a(9434),n=a(4564),r=a(7385),o=a(7689),l=a(1087),d=a(5143),u=a(4781),m=a(5470),f=a(7145),h=a(8290),v=(a(5862),a(7556),a(184));const p=s=>{let{menus:e}=s;return Array(e).fill(0).map(((s,e)=>(0,v.jsx)(h.Z,{height:35,width:205,className:"side-nav-categories"})))};var x=a(1842);const j=s=>{var e;let{createdDiscussionsTab:a,joinedDiscussionsTab:h,userActivityTab:j,forumNotificationsTab:g,addDiscussionsBtn:y,discussionFilter:N,createdDiscussionsData:b,joinedDiscussionsData:w,activitiesData:k,paramsUserData:C,notifications:S,sortOptions:_,onOptionSelect:D,emptySortDiscussions:E,className:Z}=s;const T=(0,c.I0)(),A=(0,c.v9)((s=>s.user.data)),O=(0,c.v9)((s=>s.forumcategories.data)),U=(0,c.v9)((s=>s.forumtags.data)),{userId:I,tab:L}=(0,o.UO)(),F=Number(I),P=Number(null===A||void 0===A?void 0:A.id),R=(0,o.s0)(),J=(0,o.TH)(),[B,G]=(0,t.useState)(N),[H,q]=(0,t.useState)([]),[M,V]=(0,t.useState)(Array.isArray(J.state)?J.state:[]),[W,Y]=(0,t.useState)(!1),[z,K]=(0,t.useState)({}),[Q,X]=(0,t.useState)(0),[$,ss]=(0,t.useState)(0),[es,as]=(0,t.useState)({}),[ts,is]=(0,t.useState)(!0),[cs,ns]=(0,t.useState)(!0),[rs,os]=(0,t.useState)(!1);(0,t.useEffect)((()=>{O?is(!1):(is(!0),T((0,n.y)()))}),[T,O]),(0,t.useEffect)((()=>{0===U.length?(ns(!0),T((0,r.l)())):ns(!1)}),[T,U]),(0,t.useEffect)((()=>{J.state&&J.state.selectedTags&&V(J.state.selectedTags)}),[J.state]),(0,t.useEffect)((()=>{(async()=>{try{const s=await i.Z.get("/api/user/".concat(I)),{id:e,display_name:a,profile_pic:t,createdAt:c}=s.data;K({id:e,display_name:a,profile_pic:t,createdAt:c}),C(s.data)}catch(s){console.log("Error fetching data:",s)}})()}),[I,C]),(0,t.useEffect)((()=>{null===H&&q(O[0].id)}),[O,H]),(0,t.useEffect)((()=>{(async()=>{try{const s=await i.Z.get("/api/".concat(I,"/created/discussion")),e=s.data.sort(((s,e)=>new Date(e.created_at)-new Date(s.created_at)));X(s.data.length),b(e)}catch(s){console.log("Error fetching user created discussions:",s)}})()}),[I,b]),(0,t.useEffect)((()=>{(async()=>{try{const s=await i.Z.get("/api/".concat(I,"/joined/discussion")),e=s.data.sort(((s,e)=>new Date(e.created_at)-new Date(s.created_at)));ss(s.data.length),w(e)}catch(s){console.log("Error fetching user created discussions:",s)}})()}),[I,w]),(0,t.useEffect)((()=>{(async()=>{try{const s=(await i.Z.get("/api/forum-activities/".concat(I))).data.sort(((s,e)=>new Date(e.createdAt)-new Date(s.createdAt)));k(s)}catch(s){console.log("Error fetching forum activities:",s)}})()}),[I,k]),(0,t.useEffect)((()=>{(async()=>{try{const s=await i.Z.get("/api/total-forum-notifications");as(s.data)}catch(s){console.log("Error fetching total unread notifications",s)}})()}),[S]),(0,t.useEffect)((()=>{switch(L){case"created_discussions":a(),G(!0);break;case"joined_discussions":h(),G(!0);break;case"user_activity":j(),G(!1);break;case"notifications":g(),G(!1);break;case"add_discussions":y(),G(!1)}}),[L,R,a,h,j,g,y]);const ls=()=>{R("/forum/profile/".concat(I,"/created_discussions")),a()},ds=()=>{R("/forum/profile/".concat(I,"/joined_discussions")),h()},us=()=>{R("/forum/profile/".concat(I,"/user_activity")),j()},ms=()=>{R("/forum/profile/".concat(I,"/notifications")),g()},fs=()=>{"function"===typeof E&&E([])},hs=()=>{os((s=>!s))},vs=()=>{Y((s=>!s))},ps=(null===z||void 0===z?void 0:z.createdAt)||"",xs=new Date(ps).toLocaleDateString("en-US",{year:"numeric",month:"long"});return(0,v.jsxs)(v.Fragment,{children:[rs&&(0,v.jsx)(x.Z,{onClick:hs}),W&&(0,v.jsx)(f.Z,{onClick:vs,tagsData:U}),(0,v.jsxs)("div",{className:"forum-category-page-filter-nav ".concat(Z),children:[A?(0,v.jsx)(v.Fragment,{children:I&&(0,v.jsxs)("div",{className:"forum-category-page-row1",children:[(0,v.jsxs)("div",{className:"forum-category-page-row1-row1",children:[(0,v.jsx)("img",{src:z.profile_pic||d,alt:"",className:"forum-profile-pic"}),(0,v.jsxs)("div",{className:"user-display-name",children:[(0,v.jsx)("p",{children:z.display_name}),(0,v.jsxs)("small",{children:["Joined in\xa0",xs]})]})]}),(0,v.jsxs)("ul",{className:"forum-profile-menu",children:[(0,v.jsxs)("li",{onClick:ls,children:["Created Discussions ",(0,v.jsxs)("span",{className:"forum-activity-counter",children:["(",Q,")"]})]}),(0,v.jsxs)("li",{onClick:ds,children:["Joined Discussions ",(0,v.jsxs)("span",{className:"forum-activity-counter",children:["(",$,")"]})]}),(0,v.jsx)("li",{onClick:us,children:"Latest Activity"}),P===F?(0,v.jsxs)("li",{onClick:ms,className:"forum-notifications",children:["Notifications ",es.totalCount>0&&(0,v.jsx)("div",{className:"forum-notification-counter",children:es.totalCount})]}):null]})]})}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"forum-category-page-row1 not-authenticated",children:[(0,v.jsx)("p",{children:"Join our community, elevate your marketplace experience!"}),(0,v.jsx)("button",{type:"button",className:"forum-login-btn",onClick:hs,children:"Sign In"}),(0,v.jsxs)("p",{children:["Don\u2019t have a Yogeek account? ",(0,v.jsx)(l.rU,{to:"/registerbyemail",children:"Sign up"})]})]}),I&&(0,v.jsxs)("div",{className:"forum-category-page-row1",children:[(0,v.jsxs)("div",{className:"forum-category-page-row1-row1",children:[(0,v.jsx)("img",{src:z.profile_pic||d,alt:"",className:"forum-profile-pic"}),(0,v.jsxs)("div",{className:"user-display-name",children:[(0,v.jsx)("p",{children:z.display_name}),(0,v.jsxs)("small",{children:["Joined in\xa0",xs]})]})]}),(0,v.jsxs)("ul",{className:"forum-profile-menu",children:[(0,v.jsxs)("li",{onClick:ls,children:["Created Discussions ",(0,v.jsxs)("span",{className:"forum-activity-counter",children:["(",Q,")"]})]}),(0,v.jsxs)("li",{onClick:ds,children:["Joined Discussions ",(0,v.jsxs)("span",{className:"forum-activity-counter",children:["(",$,")"]})]}),(0,v.jsx)("li",{onClick:us,children:"Latest Activity"}),P===F?(0,v.jsxs)("li",{onClick:ms,className:"forum-notifications",children:["Notifications ",es.totalCount>0&&(0,v.jsx)("div",{className:"forum-notification-counter",children:es.totalCount})]}):null]})]})]}),B&&(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:"forum-sortby",children:[(0,v.jsx)("label",{children:"SORT BY"}),(0,v.jsx)(u.Z,{data:_,onOptionSelect:D,className:"forum-sortby-dropdown-select"})]})}),(0,v.jsxs)("div",{className:"forum-category-page-row2",children:[(0,v.jsx)("div",{className:"section-label-container",children:(0,v.jsx)("label",{children:"CATEGORIES"})}),(0,v.jsxs)("div",{className:"forum-category-btn-container",children:[ts&&(0,v.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"3px"},children:(0,v.jsx)(p,{menus:8})}),null===O||void 0===O||null===(e=O.categories)||void 0===e?void 0:e.map((s=>(0,v.jsx)(l.OL,{activeclassname:"active",className:"forum-category-menu",to:"/forum/category/".concat(s.id,"/").concat(s.name),onClick:fs,children:s.name},s.id)))]})]}),(0,v.jsxs)("div",{className:"forum-category-page-row3",children:[(0,v.jsx)("div",{className:"section-label-container",children:(0,v.jsx)("label",{children:"POPULAR TAGS"})}),(0,v.jsxs)("div",{className:"forum-category-btn-container",children:[cs&&(0,v.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"3px"},children:(0,v.jsx)(p,{menus:8})}),U.slice(0,10).map((s=>(0,v.jsx)(m.Z,{onClick:()=>{return e=s.id,void V((s=>{const a=s.includes(e)?s.filter((s=>s!==e)):[...s,e];return"function"===typeof E&&E([]),R("/forum/filtertags",{state:{selectedTags:a}}),a}));var e},label:s.name,className:"tag-btn ".concat(M.includes(s.id)?"active":"")},s.id))),(0,v.jsxs)("div",{className:"more-tags",style:{justifyContent:M.length>0?"space-between":"end"},children:[M&&M.length>0&&(0,v.jsx)("button",{onClick:()=>{const s=[];V(s),R("/forum/filtertags",{state:{selectedTags:s}})},children:"Clear all"}),(0,v.jsx)("button",{onClick:vs,children:"Select more tags"})]})]})]})]})]})}},7222:(s,e,a)=>{a.r(e),a.d(e,{default:()=>k});var t,i=a(2791),c=a(7689),n=a(9434),r=a(2892),o=a(5089),l=a(3220),d=a(3545),u=a(953),m=a(1087),f=a(1663),h=a(6704);a(9088),a(5864),a(7318);function v(){return v=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(s[t]=a[t])}return s},v.apply(this,arguments)}function p(s,e){let{title:a,titleId:c,...n}=s;return i.createElement("svg",v({width:12,height:10,viewBox:"0 0 12 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":c},n),a?i.createElement("title",{id:c},a):null,t||(t=i.createElement("path",{d:"M7.33333 7.33333V10L12 5.33333L7.33333 0.666666V3.4C4 3.4 1.66667 2.33333 -9.53674e-07 0C0.666666 3.33333 2.66667 6.66667 7.33333 7.33333Z",fill:"#303030"})))}const x=i.forwardRef(p);a.p;var j=a(5143),g=a(184);const y=s=>{let{data:e}=s;const a=s=>{if("string"!==typeof s)return"Invalid date";const e=new Date(s);return isNaN(e.getTime())?"Invalid date":(0,f.Z)(e,{addSuffix:!0,locale:h.Z})};return(0,g.jsx)(g.Fragment,{children:null===e||void 0===e?void 0:e.map((s=>{var e,t,i,c,n,r;return(0,g.jsxs)("div",{className:"forum-discussion-card",children:[(0,g.jsxs)("div",{className:"forum-discussion-card-row1",children:[(0,g.jsx)(m.rU,{to:"/forum/profile/".concat(null===s||void 0===s?void 0:s.user_id,"/created_discussions"),children:(0,g.jsx)("img",{src:(null===s||void 0===s||null===(t=s.discussionStarter)||void 0===t?void 0:t.profile_pic)||j,alt:""})}),(0,g.jsxs)("div",{className:"forum-discussion-info",children:[(0,g.jsx)(m.rU,{to:"/forum/discussion/".concat(null===s||void 0===s?void 0:s.discussion_id,"?repliedPostId=").concat(null===s||void 0===s||null===(i=s.post)||void 0===i?void 0:i.post_id),children:(0,g.jsx)("h6",{children:null===s||void 0===s?void 0:s.discussion_title})}),(0,g.jsxs)("small",{children:["by\xa0",(0,g.jsx)(m.rU,{to:"/forum/profile/".concat(null===s||void 0===s?void 0:s.discussion_user_id,"/created_discussions"),children:null===s||void 0===s||null===(c=s.discussionStarter)||void 0===c?void 0:c.display_name}),"\xa0",a(null===s||void 0===s?void 0:s.discussion_created_at)]})]})]}),0!==(null===s||void 0===s||null===(n=s.post)||void 0===n?void 0:n.level)&&(0,g.jsxs)("div",{className:"replied-icon",children:[(0,g.jsx)(x,{})," ",(0,g.jsx)("small",{children:"Replied Post"})]}),(0,g.jsx)("div",{className:"forum-discussion-card-row2",children:(0,g.jsx)("div",{dangerouslySetInnerHTML:{__html:null===s||void 0===s||null===(r=s.post)||void 0===r?void 0:r.content}})})]},null===s||void 0===s||null===(e=s.post)||void 0===e?void 0:e.post_id)}))})};var N=a(4601),b=a(7531),w=a(1842);const k=()=>{const s=(0,c.s0)(),e=(0,c.TH)(),a=(0,n.v9)((s=>s.user.data)),t=new URLSearchParams(e.search).get("keyword"),[m,f]=(0,i.useState)([]),[h]=(0,i.useState)(!1),[v,p]=(0,i.useState)(!1),[x,j]=(0,i.useState)(1),[k,C]=(0,i.useState)(1),[S,_]=(0,i.useState)(null),[D]=(0,i.useState)(15);(0,i.useEffect)((()=>{E(x)}),[x,e.search,t]);const E=async function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;f([]);try{const e={page:s,limit:D},a=await r.Z.get("/api/search-post?keyword=".concat(t),{params:e});_(a.data.totalDiscussions),C(a.data.totalPages),f(a.data.discussions)}catch(e){console.error("Error fetching search results:",e)}},Z=s=>{s>=1&&s<=k&&j(s)};return(0,g.jsxs)(g.Fragment,{children:[v&&(0,g.jsx)(w.Z,{onClick:()=>{p((s=>!s))}}),(0,g.jsxs)("div",{className:"forum-page-container",children:[(0,g.jsx)(o.Z,{authUser:a}),(0,g.jsx)("div",{children:(0,g.jsxs)("div",{className:"forum-search-result-page-container",children:[(0,g.jsx)(N.Z,{authUser:a,discussionFilter:h,onClick:()=>{p(!0)}}),(0,g.jsxs)("div",{className:"forum-search-result-page-col2",children:[(0,g.jsx)("div",{className:"language-selector-container",children:(0,g.jsx)(d.Z,{})}),(0,g.jsx)(b.Z,{}),(0,g.jsxs)("div",{className:"search-result-list-container",children:[(0,g.jsx)("div",{className:"search-query-result-info",children:(0,g.jsxs)("div",{className:"search-query-result-info-row1",children:[(0,g.jsxs)("div",{className:"used-search-keyword",children:[(0,g.jsxs)("h4",{children:['Search results for "',t,'"']}),(0,g.jsxs)("span",{children:["(",S," ",S>1?"posts found":"post found",")"]})]}),(0,g.jsx)(u.Z,{onClick:()=>{a?s("/forum/profile/".concat(a.id,"/add_discussions")):p(!0)},label:"Start a discussion"})]})}),(0,g.jsx)("div",{className:"discussion-list",children:(0,g.jsx)(y,{data:m})}),S>15&&(0,g.jsxs)("div",{className:"pagination",children:[(0,g.jsx)("li",{className:"page-item",children:(0,g.jsx)("button",{onClick:()=>Z(x-1),disabled:1===x,className:"page-link",children:"Previous"})}),Array.from({length:k},((s,e)=>e+1)).map((s=>(0,g.jsx)("li",{className:"page-item",children:(0,g.jsx)("button",{onClick:()=>Z(s),className:s===x?"active page-link":"page-link",children:s})},s))),(0,g.jsx)("li",{className:"page-item",children:(0,g.jsx)("button",{onClick:()=>Z(x+1),disabled:x===k,className:"page-link",children:"Next"})})]})]})]})]})}),(0,g.jsx)(l.Z,{className:"forum-search-results-footer"})]})]})}},7385:(s,e,a)=>{a.d(e,{l:()=>c});var t=a(672),i=a(2892);const c=()=>async s=>{try{const e=await i.Z.get("/api/fetchforumtags");if(200===e.status){const a=e.data;s((0,t.mG)(a))}}catch(e){console.error("Error fetching forum tags:",e),s((0,t.sT)("Error fetching forum tags."))}}}}]);
//# sourceMappingURL=6067.113d7724.chunk.js.map
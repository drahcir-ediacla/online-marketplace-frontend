"use strict";(self.webpackChunkyogeek=self.webpackChunkyogeek||[]).push([[4822],{4822:(e,s,t)=>{t.r(s),t.d(s,{default:()=>p});var a=t(2791),r=t(7689),c=t(2892),n=(t(9326),t(5089)),o=t(3220),i=t(3545),l=t(953),d=t(7956),u=t(5219),m=t(4601),x=t(7531),g=t(4781),h=t(9401),j=t(8558),v=t(184);const p=()=>{const{id:e,name:s}=(0,r.UO)(),t=(0,a.useRef)(),[p,f]=(0,a.useState)({}),[y]=(0,a.useState)(!0),[N,w]=(0,a.useState)([]),[k,b]=(0,a.useState)([]),[Z,S]=(0,a.useState)(1),[_]=(0,a.useState)(10),[D,O]=(0,a.useState)(!1),[C,M]=(0,a.useState)(!0),A=["Most Recent","Most Viewed","Most Liked"].map((e=>({label:e,value:e.toLowerCase()})));(0,a.useEffect)((()=>{(async()=>{if(!D&&C){O(!0);try{const t=await c.Z.get("/api/forumcategory/".concat(e,"/").concat(s,"?page=").concat(Z,"&limit=").concat(_));f(t.data);const a=t.data.allDiscussions;b((e=>{const s=a.filter((s=>!e.some((e=>e.discussion_id===s.discussion_id))));return[...e,...s]})),M(a.length>0)}catch(t){console.error("Error fetching data:",t)}finally{O(!1)}}})()}),[e,s]);const E=Array.isArray(null===p||void 0===p?void 0:p.subcategories)?null===p||void 0===p?void 0:p.subcategories:[],F=[...k].sort(((e,s)=>new Date(s.created_at)-new Date(e.created_at))),I=[...k].sort(((e,s)=>new Date(s.created_at)-new Date(e.created_at))),L=[...k].sort(((e,s)=>{const t=e.post.reduce(((e,s)=>e+(s.views||0)),0);return s.post.reduce(((e,s)=>e+(s.views||0)),0)-t})),R=[...k].sort(((e,s)=>{const t=e.post.reduce(((e,s)=>e+(s.likes?s.likes.length:0)),0);return s.post.reduce(((e,s)=>e+(s.likes?s.likes.length:0)),0)-t})),U=e=>{"most recent"===e.value&&w(I),"most viewed"===e.value&&w(L),"most liked"===e.value&&w(R)};return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:"forum-page-container",children:[(0,v.jsx)(n.Z,{}),(0,v.jsx)("div",{children:(0,v.jsxs)("div",{className:"forum-category-page-container",children:[(0,v.jsx)(m.Z,{sortOptions:A,discussionFilter:y,onOptionSelect:U}),(0,v.jsxs)("div",{className:"forum-category-page-col2",children:[(0,v.jsx)("div",{className:"language-selector-container",children:(0,v.jsx)(i.Z,{})}),(0,v.jsx)(x.Z,{className:"custom-forum-search-box"}),(0,v.jsx)(j.Z,{}),(0,v.jsxs)("div",{className:"discussions-container",children:[(0,v.jsxs)("div",{className:"category-container",children:[(0,v.jsxs)("div",{className:"category-name",children:[(0,v.jsx)("h4",{children:p.name}),(0,v.jsx)("div",{className:"start-discussion-btn-container",children:(0,v.jsx)(l.Z,{label:"Start a discussion"})}),(0,v.jsx)(g.Z,{data:A,onOptionSelect:U,className:"discussion-sortby-dropdown-select"})]}),E&&E.length>0&&(0,v.jsx)(d.Z,{data:p})]}),(0,v.jsx)("div",{className:"discussion-list",children:N&&N.length>0?(0,v.jsx)(u.Z,{data:N}):(0,v.jsx)(u.Z,{data:F})}),C&&!D&&(0,v.jsx)("div",{ref:e=>{D||(t.current&&t.current.disconnect(),t.current=new IntersectionObserver((e=>{e[0].isIntersecting&&S((e=>e+1))})),e&&t.current.observe(e))},style:{height:"20px",backgroundColor:"transparent"}}),D&&(0,v.jsx)("div",{className:"infinite-scroll-loading-spinner",children:(0,v.jsx)(h.r,{})}),!C&&(0,v.jsx)("div",{className:"no-more-data",children:"No more data to load"})]})]})]})}),(0,v.jsx)(o.Z,{className:"forum-category-footer"})]})})}}}]);
//# sourceMappingURL=4822.5d2df95e.chunk.js.map
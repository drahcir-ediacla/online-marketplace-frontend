{"version":3,"file":"static/js/3048.1b0c50ea.chunk.js","mappings":"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","sources":["components/Forum/SkeletonLoading/ForumCardSkeleton.jsx","pages/Forum/ForumCategoryPage/MainCategory.jsx"],"sourcesContent":["import React from 'react';\r\nimport Skeleton from 'react-loading-skeleton';\r\nimport 'react-loading-skeleton/dist/skeleton.css'\r\nimport './style.scss'\r\n\r\nconst ForumCardSkeleton = ({ menus }) => {\r\n    return Array(menus)\r\n        .fill(0)\r\n        .map((_, i) => (\r\n                    <Skeleton height={74} />\r\n        ));\r\n};\r\n\r\nexport default ForumCardSkeleton;\r\n","import React, { useState, useEffect } from 'react'\r\nimport { useParams } from 'react-router-dom';\r\nimport axios from '../../../apicalls/axios';\r\nimport './style.scss'\r\nimport Header from '../../../layouts/Forum/Header'\r\nimport Footer from '../../../layouts/Forum/Footer'\r\nimport GTranslate from '../../../components/GTranslate';\r\nimport NewDiscussionBtn from '../../../components/Button/NewDiscussionBtn'\r\nimport ForumSubCategoryCard from '../../../components/Forum/ForumSubCategoryCard'\r\nimport ForumDiscussionCard from '../../../components/Forum/ForumDiscussionCard'\r\nimport FilterNavigation from '../../../layouts/Forum/FilterNavigation'\r\nimport SearchDiscussionBox from '../../../components/SearchDiscussionBox'\r\nimport CustomSelect from '../../../components/FormField/CustomSelect';\r\nimport ForumCardSkeleton from '../../../components/Forum/SkeletonLoading/ForumCardSkeleton';\r\nimport { ReactComponent as LoadingSpinner } from '../../../assets/images/loading-spinner.svg'\r\nimport SmallScreenNavMenu from '../../../components/Forum/SmallScreenNavMenu';\r\n\r\n\r\n\r\nconst ForumCategoryPage = () => {\r\n\r\n    const { id, name } = useParams()\r\n    const [categoryData, setCategoryData] = useState({})\r\n    const [discussionFilter] = useState(true)\r\n    const [sortDiscussions, setSortDiscussions] = useState([])\r\n    const [loadingData, setLoadingData] = useState(true)\r\n    const filterDiscussionOptions = ['Most Recent', 'Most Viewed', 'Most Liked'].map(option => (\r\n        {\r\n            label: option,\r\n            value: option.toLowerCase()\r\n        }));\r\n\r\n\r\n    useEffect(() => {\r\n        const fetchCategoryData = async () => {\r\n            try {\r\n                setLoadingData(true)\r\n                const response = await axios.get(`/api/forumcategory/${id}/${name}`);\r\n                setCategoryData(response.data)\r\n                setLoadingData(false)\r\n            } catch (error) {\r\n                setLoadingData(false)\r\n                console.error(\"Error fetching data:\", error);\r\n            }\r\n        }\r\n        fetchCategoryData()\r\n    }, [id, name])\r\n\r\n\r\n\r\n    const subcategories = Array.isArray(categoryData?.subcategories) ? categoryData?.subcategories : [];\r\n    const discussions = Array.isArray(categoryData?.allDiscussions) ? categoryData?.allDiscussions.slice(0, 10) : [];\r\n    const descendingDiscussions = [...discussions].sort((a, b) => new Date(b.created_at) - new Date(a.created_at));\r\n    const mostRecent = [...discussions].sort((a, b) => new Date(b.created_at) - new Date(a.created_at));\r\n    // Sort by most viewed (descending by total views)\r\n    const mostViewed = [...discussions].sort((a, b) => {\r\n        const viewsA = a.post.reduce((acc, post) => acc + (post.views || 0), 0);\r\n        const viewsB = b.post.reduce((acc, post) => acc + (post.views || 0), 0);\r\n        return viewsB - viewsA;\r\n    });\r\n\r\n    // Sort by most liked (descending by total likes)\r\n    const mostLiked = [...discussions].sort((a, b) => {\r\n        const likesA = a.post.reduce((acc, post) => acc + (post.likes ? post.likes.length : 0), 0);\r\n        const likesB = b.post.reduce((acc, post) => acc + (post.likes ? post.likes.length : 0), 0);\r\n        return likesB - likesA;\r\n    });\r\n\r\n    const handleOptionSelect = (option) => {\r\n\r\n        if (option.value === 'most recent') {\r\n            setSortDiscussions(mostRecent);\r\n        }\r\n\r\n        if (option.value === 'most viewed') {\r\n            setSortDiscussions(mostViewed);\r\n        }\r\n\r\n        if (option.value === 'most liked') {\r\n            setSortDiscussions(mostLiked);\r\n        }\r\n    };\r\n\r\n\r\n\r\n    return (\r\n        <>\r\n            <div className='forum-page-container'>\r\n                <Header />\r\n                <div>\r\n                    <div className=\"forum-category-page-container\">\r\n                        <FilterNavigation\r\n                            sortOptions={filterDiscussionOptions}\r\n                            discussionFilter={discussionFilter}\r\n                            onOptionSelect={handleOptionSelect}\r\n                            emptySortDiscussions={setSortDiscussions}\r\n                        />\r\n                        <div className='forum-category-page-col2'>\r\n                            <div className='language-selector-container'>\r\n                                <GTranslate />\r\n                            </div>\r\n                            <SearchDiscussionBox className='custom-forum-search-box' />\r\n                            <SmallScreenNavMenu />\r\n                            <div className=\"discussions-container\">\r\n                                <div className=\"category-container\">\r\n                                    <div className=\"category-name\">\r\n                                        <h4>{categoryData.name}</h4>\r\n                                        <div className='start-discussion-btn-container'>\r\n                                            <NewDiscussionBtn label='Start a discussion' />\r\n                                        </div>\r\n                                        <CustomSelect\r\n                                            data={filterDiscussionOptions}\r\n                                            onOptionSelect={handleOptionSelect}\r\n                                            className='discussion-sortby-dropdown-select'\r\n                                        />\r\n                                    </div>\r\n                                    {loadingData && <ForumCardSkeleton menus={2} />}\r\n                                    {subcategories && subcategories.length > 0 && (\r\n                                        <ForumSubCategoryCard\r\n                                            data={categoryData}\r\n                                        />\r\n                                    )}\r\n                                </div>\r\n                                <div className='recent-discussion'>\r\n                                    {discussions.length > 0 && <h6>Recent Discussions</h6>}\r\n                                    {loadingData && <div className='infinite-scroll-loading-spinner'><LoadingSpinner /></div>}\r\n                                    {sortDiscussions && sortDiscussions.length > 0 ? (\r\n                                        <ForumDiscussionCard\r\n                                            data={sortDiscussions}\r\n                                        />\r\n                                    ) : (\r\n                                        <ForumDiscussionCard\r\n                                            data={descendingDiscussions}\r\n                                        />\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <Footer className='forum-category-footer' />\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\n\r\nexport default ForumCategoryPage;"],"names":["_ref","menus","Array","fill","map","_","i","_jsx","Skeleton","height","ForumCategoryPage","id","name","useParams","categoryData","setCategoryData","useState","discussionFilter","sortDiscussions","setSortDiscussions","loadingData","setLoadingData","filterDiscussionOptions","option","label","value","toLowerCase","useEffect","async","response","axios","get","concat","data","error","console","fetchCategoryData","subcategories","isArray","discussions","allDiscussions","slice","descendingDiscussions","sort","a","b","Date","created_at","mostRecent","mostViewed","viewsA","post","reduce","acc","views","mostLiked","likesA","likes","length","handleOptionSelect","_Fragment","children","_jsxs","className","Header","FilterNavigation","sortOptions","onOptionSelect","emptySortDiscussions","GTranslate","SearchDiscussionBox","SmallScreenNavMenu","NewDiscussionBtn","CustomSelect","ForumCardSkeleton","ForumSubCategoryCard","LoadingSpinner","ForumDiscussionCard","Footer"],"sourceRoot":""}
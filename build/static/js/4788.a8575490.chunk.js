"use strict";(self.webpackChunkyogeek=self.webpackChunkyogeek||[]).push([[4788],{2403:(e,s,l)=>{l.d(s,{r:()=>c});var i,a=l(2791);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var l=arguments[s];for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i])}return e},n.apply(this,arguments)}function o(e,s){let{title:l,titleId:o,...c}=e;return a.createElement("svg",n({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:s,"aria-labelledby":o},c),l?a.createElement("title",{id:o},l):null,i||(i=a.createElement("path",{d:"M3 7C3 6.44772 3.44772 6 4 6H20C20.5523 6 21 6.44772 21 7C21 7.55228 20.5523 8 20 8H4C3.44772 8 3 7.55228 3 7ZM6 12C6 11.4477 6.44772 11 7 11H17C17.5523 11 18 11.4477 18 12C18 12.5523 17.5523 13 17 13H7C6.44772 13 6 12.5523 6 12ZM9 17C9 16.4477 9.44772 16 10 16H14C14.5523 16 15 16.4477 15 17C15 17.5523 14.5523 18 14 18H10C9.44772 18 9 17.5523 9 17Z"})))}const c=a.forwardRef(o);l.p},46:(e,s,l)=>{l.d(s,{Z:()=>a});l(2791),l(4166);var i=l(184);const a=function(e){const{id:s,name:l,value:a,label:n,checked:o,className:c,onChange:r,onClick:t}=e;return(0,i.jsx)("div",{children:(0,i.jsxs)("label",{htmlFor:s,className:"radio-container",children:[n,(0,i.jsx)("input",{type:"radio",id:s,name:l,value:a,checked:o,className:c,onChange:r,onClick:t}),(0,i.jsx)("span",{className:"checkmark"})]})})}},3145:(e,s,l)=>{l.r(s),l.d(s,{default:()=>T});var i=l(2791),a=l(2892),n=l(7689),o=l(3071),c=(l(6172),l(6593)),r=l(960),t=(l(4628),l(7229)),d=(l(1650),l(9915),l(3615)),h=l(314),v=l(184);const u=e=>{let{data:s,avgRating:l,totalReviews:n,authenticatedUser:c,allFollowersList:r,allFollowingList:h}=e;const[u,m]=(0,i.useState)(!1),[x,j]=(0,i.useState)(!1),[p,g]=(0,i.useState)([]),[f,w]=(0,i.useState)([]),N=(null===s||void 0===s?void 0:s.createdAt)||"",b=new Date(N).toLocaleDateString("en-US",{year:"numeric",month:"long"}),y=Array(5).fill(0);if((0,i.useEffect)((()=>{(async()=>{try{const e=await a.Z.get("/api/get/following-".concat(s.id));console.log("followingdata.id:",null===s||void 0===s?void 0:s.id),m("Following User"===e.data.message)}catch(e){m(!1)}})()}),[null===s||void 0===s?void 0:s.id,u]),(0,i.useEffect)((()=>{(async()=>{try{const e=await a.Z.get("/api/getall/following-".concat(s.id));g(e.data)}catch(e){console.error("Error fetching all user following:",e)}})()}),[null===s||void 0===s?void 0:s.id,u]),(0,i.useEffect)((()=>{(async()=>{try{const e=await a.Z.get("/api/getall/follower-".concat(s.id));w(e.data)}catch(e){console.error("Error fetching all user following:",e)}})()}),[null===s||void 0===s?void 0:s.id,u]),!s)return null;return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:"profile-info-box",children:[(0,v.jsxs)("div",{className:"profile-info-box-row1",children:[(0,v.jsx)("img",{src:(null===s||void 0===s?void 0:s.profile_pic)||t,alt:"",className:"profile-pic"}),(0,v.jsx)("div",{className:"profile-name",children:null===s||void 0===s?void 0:s.display_name})]}),(0,v.jsxs)("div",{className:"profile-info-box-row2",children:[(0,v.jsxs)("div",{className:"seller-rating",children:[(0,v.jsx)("span",{children:0===l?"":l}),(0,v.jsx)("div",{style:{display:"flex",gap:"3px"},children:y.map(((e,s)=>(0,v.jsx)(o.QJe,{size:17,color:(l||0)>s?"#FFD800":"#bcbcbc"},s)))}),(0,v.jsx)("span",{children:"|"}),(0,v.jsxs)("span",{children:[n||0," Review(s)"]})]}),(0,v.jsxs)("div",{className:"joined-date-loc",children:[(0,v.jsx)("span",{children:null===s||void 0===s?void 0:s.city})," \xb7 ",(0,v.jsxs)("span",{children:["Joined in ",b]})]}),(0,v.jsx)("div",{className:"profile-desc",children:(0,v.jsx)("p",{children:null===s||void 0===s?void 0:s.bio})}),(0,v.jsxs)("div",{className:"follow-component-container",children:[c&&(null===c||void 0===c?void 0:c.id)!==(null===s||void 0===s?void 0:s.id)&&(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{className:"follow-message-buttons",children:u?(0,v.jsx)(d.Z,{label:"Unfollow",className:"unfollowing-btn",onClick:async()=>{try{const e=await a.Z.post("/api/unfollow-".concat(s.id));return m(!1),e}catch(e){console.error("Error unfollowing user:",e)}}}):(0,v.jsx)(d.Z,{label:"Follow",onClick:async()=>{try{const e=await a.Z.post("/api/follow-".concat(s.id));return m(!0),e}catch(e){console.error("Error following user:",e)}}})})}),(0,v.jsxs)("div",{className:"follow",children:[(0,v.jsxs)("div",{className:"follow-counter",onClick:r,children:[(0,v.jsx)("p",{children:"Followers"}),(0,v.jsx)("span",{children:f.length})]}),(0,v.jsx)("div",{className:"counter-divider"}),(0,v.jsxs)("div",{className:"follow-counter",onClick:h,children:[(0,v.jsx)("p",{children:"Following"}),(0,v.jsx)("span",{children:p.length})]})]})]})]})]})})};var m=l(1087),x=l(1310);const j=e=>{let{data:s}=e;const{user:l}=(0,x.Z)(),[n,o]=(0,i.useState)([]);return(0,i.useEffect)((()=>{(async()=>{try{const e=await a.Z.get("/api/getall/follower-".concat(s.id));o(e.data)}catch(e){console.error("Error fetching all user following:",e)}})()}),[null===s||void 0===s?void 0:s.id]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("h5",{children:[(null===s||void 0===s?void 0:s.id)!==(null===l||void 0===l?void 0:l.id)?null===s||void 0===s?void 0:s.display_name:"You"," have ",null===n||void 0===n?void 0:n.length," follower(s)"]}),(0,v.jsx)("div",{className:"follower-card-box",children:n.map(((e,s)=>{var l,i,a,n;return(0,v.jsx)(m.rU,{to:"/profile/".concat(null===e||void 0===e?void 0:e.follower_id),children:(0,v.jsxs)("div",{className:"follower-card-container",children:[(0,v.jsx)("div",{className:"follower-card-row1",children:(0,v.jsx)("img",{src:(null===e||void 0===e||null===(l=e.followerInfo)||void 0===l?void 0:l.profile_pic)||t,alt:""})}),(0,v.jsx)("span",{className:"follower-name",children:null===e||void 0===e||null===(i=e.followerInfo)||void 0===i?void 0:i.display_name}),(0,v.jsxs)("span",{className:"number-follower",children:[null===e||void 0===e||null===(a=e.followerInfo)||void 0===a||null===(n=a.followers)||void 0===n?void 0:n.length," Followers"]})]},s)})}))})]})},p=e=>{let{data:s}=e;const{user:l}=(0,x.Z)(),[n,o]=(0,i.useState)([]);return(0,i.useEffect)((()=>{(async()=>{try{const e=await a.Z.get("/api/getall/following-".concat(s.id));o(e.data)}catch(e){console.error("Error fetching all user following:",e)}})()}),[null===s||void 0===s?void 0:s.id]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("h5",{children:[(null===s||void 0===s?void 0:s.id)!==(null===l||void 0===l?void 0:l.id)?null===s||void 0===s?void 0:s.display_name:"You are"," following ",null===n||void 0===n?void 0:n.length," user(s)"]}),(0,v.jsx)("div",{className:"follower-card-box",children:n.map(((e,s)=>{var l,i,a,n;return(0,v.jsx)(m.rU,{to:"/profile/".concat(null===e||void 0===e?void 0:e.following_id),children:(0,v.jsxs)("div",{className:"follower-card-container",children:[(0,v.jsx)("div",{className:"follower-card-row1",children:(0,v.jsx)("img",{src:(null===e||void 0===e||null===(l=e.followingInfo)||void 0===l?void 0:l.profile_pic)||t,alt:""})}),(0,v.jsx)("span",{className:"follower-name",children:null===e||void 0===e||null===(i=e.followingInfo)||void 0===i?void 0:i.display_name}),(0,v.jsxs)("span",{className:"number-follower",children:[null===e||void 0===e||null===(a=e.followingInfo)||void 0===a||null===(n=a.followers)||void 0===n?void 0:n.length," Followers"]})]},s)})}))})]})};var g=l(7057);const f=e=>{let{placeholder:s,value:l,className:i,onChange:a}=e;return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:"search-box-container",children:[(0,v.jsx)("input",{type:"text",value:l,placeholder:s,className:"search-box-input ".concat(i),onChange:a}),(0,v.jsx)("div",{className:"search-icon",children:(0,v.jsx)(g.r,{})})]})})};l(6559);var w=l(9434),N=l(1757),b=l(2403),y=l(46),k=l(7148),C=l(5805);const S=e=>{let{className:s,userId:l,userData:n,filteredListings:o,authenticatedUser:c,err:r}=e;const t=(0,w.I0)(),[u,m]=(0,i.useState)(0),[x,j]=(0,i.useState)(!1),p=e=>{m(e)},g=()=>{j((e=>!e))},[f,S]=(0,i.useState)(null),[F,Z]=(0,i.useState)("Most Recent"),[P,E]=(0,i.useState)({condition:[],sort:"",dealOption:[]}),[U,L]=(0,i.useState)({minPrice:"",maxPrice:""}),[I,_]=(0,i.useState)({condition:[],sort:"",dealOption:[]}),[R,A]=(0,i.useState)({minPrice:"",maxPrice:""});(0,i.useEffect)((()=>{(async()=>{t((0,N.P)(!0));try{var e;const s=await a.Z.get("/api/user/".concat(l),{params:{...I,...R,sort:I.sort}});n(s.data),o(null===(e=s.data)||void 0===e?void 0:e.products);const i=await a.Z.get("/auth/check-auth");c(i.data.user),t((0,N.P)(!1))}catch(s){t((0,N.P)(!1)),console.error("Error fetching data:",s),s.response&&401===s.response.status?console.error("User not authenticated"):r(!0)}})()}),[l,I,t]);const O=e=>{const s=e.target.value;Z(s),E((e=>({...e,sort:s})))},D=e=>{const{name:s,value:l,checked:i}=e.target;E((e=>({...e,[s]:"condition"===s||"dealOption"===s?i?[...e[s],l]:e[s].filter((e=>e!==l)):l})))},H=e=>{const{name:s,value:l}=e.target;L((e=>({...e,[s]:l})))},M=()=>{_({...P,applied:!0}),A({...U})},W=e=>{"Enter"===e.key&&(M(),j((e=>!e)))};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("button",{className:"custom-filter-button ".concat(s),onClick:g,children:[(0,v.jsx)("span",{children:"Filters"}),(0,v.jsx)("div",{className:"svg-style",children:(0,v.jsx)(b.r,{})})]}),x&&(0,v.jsx)("div",{className:"item-filter-modal-container",children:(0,v.jsxs)("div",{className:"item-filter-modal-box",children:[(0,v.jsx)("div",{className:"item-filter-modal-row1",children:(0,v.jsx)("button",{className:"closebtn",onClick:g,children:(0,v.jsx)("i",{class:"fa fa-times"})})}),(0,v.jsxs)("div",{className:"item-filter-modal-row2",children:[(0,v.jsx)("div",{className:"item-filter-modal-row2-col1",children:(0,v.jsxs)("ul",{className:"filter-options",children:[(0,v.jsxs)("li",{className:"filter-tab ".concat(0===u?"active":""),onClick:()=>p(0),children:["Sort By",(0,v.jsx)("div",{className:"filter-arrow"})]}),(0,v.jsxs)("li",{className:"filter-tab ".concat(1===u?"active":""),onClick:()=>p(1),children:["Condition",(0,v.jsx)("div",{className:"filter-arrow"})]}),(0,v.jsxs)("li",{className:"filter-tab ".concat(2===u?"active":""),onClick:()=>p(2),children:["Deal Option",(0,v.jsx)("div",{className:"filter-arrow"})]}),(0,v.jsxs)("li",{className:"filter-tab ".concat(3===u?"active":""),onClick:()=>p(3),children:["Price",(0,v.jsx)("div",{className:"filter-arrow"})]})]})}),(0,v.jsxs)("div",{className:"item-filter-modal-row2-col2",children:[(0,v.jsx)("div",{className:"filter-sortby-box",children:(0,v.jsxs)("ul",{className:"filter-sort-by-options",style:{display:0===u?"block":"none"},children:[(0,v.jsx)("li",{children:(0,v.jsx)(y.Z,{id:"mostRecent",name:"sort",value:"recent",label:"Most Recent",checked:"Most Recent"===F||P.sort.includes("recent"),onChange:O})}),(0,v.jsx)("li",{children:(0,v.jsx)(y.Z,{id:"priceLowtoHigh",name:"sort",value:"lowToHigh",label:"Price - Low to High",checked:"Price - Low to High"===F||P.sort.includes("lowToHigh"),onChange:O})}),(0,v.jsx)("li",{children:(0,v.jsx)(y.Z,{id:"priceHighToLow",name:"sort",value:"highToLow",label:"Price - High to Low",checked:"Price - High to Low"===F||P.sort.includes("highToLow"),onChange:O})})]})}),(0,v.jsxs)("div",{className:"filter-condition-box",style:{display:1===u?"flex":"none"},children:[(0,v.jsx)("div",{className:"filter-condition-box-col1",children:(0,v.jsxs)("ul",{className:"filter-condition-options",children:[(0,v.jsx)("li",{children:(0,v.jsx)(k.Z,{name:"condition",label:"Brand New",value:"Brand New",checked:P.condition.includes("Brand New"),onChange:D})}),(0,v.jsx)("li",{children:(0,v.jsx)(k.Z,{name:"condition",label:"Like New",value:"Like New",checked:P.condition.includes("Like New"),onChange:D})}),(0,v.jsx)("li",{children:(0,v.jsx)(k.Z,{name:"condition",label:"Lightly Used",value:"Lightly Used",checked:P.condition.includes("Lightly Used"),onChange:D})})]})}),(0,v.jsx)("div",{className:"filter-condition-box-col2",children:(0,v.jsxs)("ul",{className:"filter-condition-options",children:[(0,v.jsx)("li",{children:(0,v.jsx)(k.Z,{name:"condition",label:"Well Used",value:"Well Used",checked:P.condition.includes("Well Used"),onChange:D})}),(0,v.jsx)("li",{children:(0,v.jsx)(k.Z,{name:"condition",label:"Heavily Used",value:"Heavily Used",checked:P.condition.includes("Heavily Used"),onChange:D})})]})})]}),(0,v.jsx)("div",{className:"filter-deal-box",style:{display:2===u?"block":"none"},children:(0,v.jsxs)("ul",{className:"filter-deal-options",children:[(0,v.jsx)("li",{children:(0,v.jsx)(k.Z,{name:"dealOption",label:"Meet Up",value:"Meet Up",checked:P.dealOption.includes("Meet Up"),onChange:D})}),(0,v.jsx)("li",{children:(0,v.jsx)(k.Z,{name:"dealOption",label:"Delivery",value:"Delivery",checked:P.dealOption.includes("Delivery"),onChange:D})})]})}),(0,v.jsxs)("div",{className:"filter-price-range-options",style:{display:3===u?"block":"none"},children:[(0,v.jsx)("p",{children:"Show item price from"}),(0,v.jsxs)("div",{className:"input-price-range-box",children:[(0,v.jsxs)("div",{className:"input-price-range-filter-container",children:[(0,v.jsx)("span",{className:"php-symbol",children:"\u20b1"}),(0,v.jsx)(C.Z,{type:"number",name:"minPrice",value:U.minPrice,onChange:H,onKeyPress:W,className:"input-price-filter",placeholder:"Minimum"})]}),"-",(0,v.jsxs)("div",{className:"input-price-range-filter-container",children:[(0,v.jsx)("span",{className:"php-symbol",children:"\u20b1"}),(0,v.jsx)(C.Z,{type:"number",name:"maxPrice",value:U.maxPrice,onChange:H,onKeyPress:W,className:"input-price-filter",placeholder:"Maximum"})]})]})]})]})]}),(0,v.jsxs)("div",{className:"item-filter-modal-row3",children:[(0,v.jsx)(d.Z,{label:"Reset All",onClick:()=>{const e=document.querySelector('input[name="minPrice"]'),s=document.querySelector('input[name="maxPrice"]');e&&s&&(e.value="",s.value=""),L({minPrice:"",maxPrice:""}),E({condition:[],sort:"",dealOption:[]})}}),(0,v.jsx)(h.Z,{label:"Apply",className:"apply-btn",onClick:()=>{M(),g()},onKeyPress:W})]})]})})]})};var F=l(1663),Z=l(6704),P=l(4015),E=l(8289),U=l(1404),L=l(2267),I=l(1846),_=l(2529),R=l(5879),A=l(5534),O=l(2100),D=l(7206);const H=e=>{let{data:s,city:l,region:a,authenticatedUser:n,userId:o,addToWishlist:c,removeFromWishlist:r,wishlistCount:t,setWishlistCount:d,getWishlistCount:h}=e;const[u,x]=(0,i.useState)({}),[j,p]=(0,i.useState)({}),[g,f]=(0,i.useState)(!1),[w,N]=(0,i.useState)(!1),b=(0,i.useRef)(null),[y,k]=(0,i.useState)(null);if((0,i.useEffect)((()=>{const e=e=>{e.target.closest(".three-dots")||e.target.closest(".option-manage-listed-items")||p({})};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[]),(0,i.useEffect)((()=>{(async()=>{try{const e={};s.forEach((s=>{const l=Array.isArray(s.wishlist)&&s.wishlist.some((e=>String(e.user_id)===String(null===n||void 0===n?void 0:n.id)));e[s.id]=l})),x(e)}catch(e){console.error("Error fetching data:",e)}})()}),[s,null===n||void 0===n?void 0:n.id]),!s||!Array.isArray(s)||0===s.length)return null;const C=e=>{f((e=>!e)),k(e)},S=e=>{N((e=>!e)),k(e)};return(0,v.jsxs)(v.Fragment,{children:[g&&(0,v.jsx)(E.Z,{onClick:()=>C(y),productId:y,userId:o}),w&&(0,v.jsx)(U.Z,{onClick:()=>S(y),productId:y,userId:o}),s.map(((e,i)=>{const g=null===e||void 0===e?void 0:e.status;return(0,v.jsxs)("div",{className:"prod-listing-thumb",children:[(0,v.jsxs)("div",{style:{height:"333px"},children:[(0,v.jsxs)(m.rU,{to:"/productdetails/".concat(e.id,"/").concat(encodeURIComponent(e.product_name)),className:"image-holder",children:[e.images&&e.images[0]&&(0,v.jsx)("img",{src:e.images[0].image_url||D,alt:"Product ".concat(i),className:"product-img"}),!e.images&&(0,v.jsx)("img",{src:D,alt:"No Images Available",className:"product-img"})]}),(0,v.jsxs)("div",{className:"product-info",children:[(0,v.jsx)(m.rU,{to:"/productdetails/".concat(e.id,"/").concat(encodeURIComponent(e.product_name)),className:"product-name",children:(0,v.jsx)("p",{children:(w=e.product_name,N=65,w.length>N?w.substring(0,N)+"...":w)})}),(0,v.jsxs)("small",{children:[l,", ",a]}),(0,v.jsxs)("div",{className:"date-post",children:[(0,v.jsx)("div",{className:"small-clock",children:(0,v.jsx)(P.r,{})}),(0,v.jsx)("small",{children:(0,F.Z)(new Date(e.createdAt),{addSuffix:!0,locale:Z.Z})})]})]})]}),(0,v.jsx)("div",{children:(0,v.jsxs)("div",{className:"prod-condition-price",children:[(0,v.jsxs)("div",{className:"col-price",children:[(0,v.jsx)("small",{children:e.product_condition}),(0,v.jsx)("div",{className:"price",children:(f=e.price,new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP",minimumFractionDigits:2,maximumFractionDigits:2}).format(f).replace(/\.00$/,""))})]}),(0,v.jsxs)("div",{className:"col-wishlist",children:[((null===n||void 0===n?void 0:n.id)||!(null!==n&&void 0!==n&&n.id))!==o?null:(0,v.jsx)("div",{className:"three-dots",children:(0,v.jsx)(_.r,{onClick:()=>{return s=e.id,p({}),void p((e=>({...e,[s]:!0})));var s}})}),j[e.id]&&(0,v.jsx)("div",{className:"option-manage-listed-items",ref:b,children:(0,v.jsxs)("ul",{children:["Available"===g?(0,v.jsxs)("li",{onClick:()=>window.location.href="/updatelisting/".concat(e.id,"/").concat(encodeURIComponent(e.product_name)),children:[(0,v.jsx)("div",{className:"edit-icon",children:(0,v.jsx)(R.r,{})}),(0,v.jsx)("span",{children:"Edit Listing"})]}):(0,v.jsxs)("li",{className:"item-sold-edit",children:[(0,v.jsx)("div",{className:"edit-icon",children:(0,v.jsx)(R.r,{})}),(0,v.jsx)("span",{children:"Edit Listing"})]}),"Available"===g?(0,v.jsxs)("li",{className:"mark-sold",onClick:()=>S(e.id),children:[(0,v.jsx)("div",{className:"check-icon",children:(0,v.jsx)(O.r,{})}),(0,v.jsx)("span",{children:"Mark as Sold"})]}):(0,v.jsxs)("li",{className:"item-sold",children:[(0,v.jsx)("div",{className:"check-icon",children:(0,v.jsx)(O.r,{})}),(0,v.jsx)("span",{children:"Item Sold"})]}),(0,v.jsxs)("li",{onClick:()=>C(e.id),children:[(0,v.jsx)("div",{className:"delete-icon",children:(0,v.jsx)(A.r,{})}),(0,v.jsx)("span",{children:"Delete Listing"})]})]})}),(0,v.jsx)("div",{className:"wishlist-counter",children:t[e.id]||""}),(0,v.jsx)("button",{onClick:()=>(async e=>{try{u[e]?await r(e):await c(e),x((s=>({...s,[e]:!s[e]})));const l={};s.forEach((e=>{l[e.id]=h(e.id)})),d(l)}catch(l){console.error("Error updating wishlist:",l)}})(e.id),className:"heart-icon",children:u[e.id]?(0,v.jsx)(I.r,{}):(0,v.jsx)(L.r,{})})]})]})})]},i);var f,w,N}))]})};var M=l(4057),W=l(7233),B=l(8917);const T=e=>{var s;let{userId:l}=e;const{id:t}=(0,n.UO)(),[h,m]=(0,i.useState)(null),[x,g]=(0,i.useState)(null),[w,N]=(0,i.useState)(!1),[b,y]=(0,i.useState)({}),[k,C]=(0,i.useState)({}),[F,Z]=(0,i.useState)([]),[P,E]=(0,i.useState)([]),[U,L]=(0,i.useState)(null),[I,_]=(0,i.useState)(null),[R,A]=(0,i.useState)(null),O=Array(5).fill(0),[D,T]=(0,i.useState)(""),[J,z]=(0,i.useState)("");(0,i.useEffect)((()=>{(async()=>{try{const e=await a.Z.get("/api/get-reviews/".concat(t,"/").concat(J));Z(e.data.reviewsTargetId)}catch(e){console.log("Error fetching all the reviews:",e)}})()}),[t,J]),(0,i.useEffect)((()=>{(async()=>{try{const e=await a.Z.get("/api/get-reviews/".concat(t));E(e.data.allReviewsTargetId),L(e.data.averageRating),_(e.data.totalReviews),A(e.data.ratingBreakdown)}catch(e){console.log("Error fetching all the reviews:",e)}})()}),[t]);const Q=(0,i.useMemo)((()=>Array.isArray(null===h||void 0===h?void 0:h.products)?null===h||void 0===h?void 0:h.products:[]),[null===h||void 0===h?void 0:h.products]),[K,Y]=(0,i.useState)(Q),q=(0,i.useCallback)((e=>{const s=Q.find((s=>s.id===e));return s&&s.wishlist?s.wishlist.length:0}),[Q]);(0,i.useEffect)((()=>{const e={};Q.forEach((s=>{e[s.id]=q(s.id)})),C(e),console.log("Wishlist count updated:",e)}),[b,Q,q]),(0,i.useEffect)((()=>{const e={};Q.forEach((s=>{const i=Array.isArray(s.wishlist)&&s.wishlist.some((e=>String(e.user_id)===String(l)));e[s.id]=i})),console.log("Initial Product States:",e),y(e)}),[Q,l]);const[V,$]=(0,i.useState)(1),G=(0,i.useMemo)((()=>{const e=5*V,s=e-5;return F.slice(s,e)}),[V,F]),X=e=>$(e),[ee,se]=(0,i.useState)(0),le=e=>{se(e)},ie=e=>{z(e)};return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:"profile-body",children:[(0,v.jsx)(c.Z,{}),(0,v.jsx)(v.Fragment,{children:w?(0,v.jsx)("h2",{className:"profile-not-found",children:"Sorry we could not find this profile!"}):(0,v.jsx)("div",{className:"myprofile-body",children:(0,v.jsxs)("div",{className:"container",children:[(null===x||void 0===x?void 0:x.id)===(null===h||void 0===h?void 0:h.id)&&(0,v.jsx)("div",{className:"row1",children:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("h3",{children:"My Profile"}),(0,v.jsx)(d.Z,{to:"/EditProfile",label:"Edit Profile",className:"edit-profile-btn"})]})}),(0,v.jsx)("div",{className:"row2 cover-photo",children:null!==h&&void 0!==h&&h.cover_photo?(0,v.jsx)("img",{src:null===h||void 0===h?void 0:h.cover_photo,alt:""}):(0,v.jsx)(v.Fragment,{children:"NO COVER PHOTO AVAILABLE"})}),(0,v.jsxs)("div",{className:"row3 box-body",children:[(0,v.jsx)("div",{className:"col-left",children:(0,v.jsx)(u,{data:h,authenticatedUser:x,setAuthenticatedUser:g,allFollowersList:()=>le(2),allFollowingList:()=>le(3),avgRating:U,totalReviews:I})}),(0,v.jsx)("div",{className:"col-right",children:(0,v.jsxs)("div",{className:"profile-tab-box",children:[(0,v.jsxs)("div",{className:"profile-tab-header",children:[(0,v.jsx)("button",{className:"tab-name tablink ".concat(0===ee?"active":""),onClick:()=>le(0),children:"Listings"}),(0,v.jsx)("button",{className:"tab-name tablink ".concat(1===ee?"active":""),onClick:()=>le(1),children:"Reviews"}),(0,v.jsx)("button",{className:"tab-name tablink ".concat(2===ee?"active":""),onClick:()=>le(2),children:"Followers"}),(0,v.jsx)("button",{className:"tab-name tablink ".concat(3===ee?"active":""),onClick:()=>le(3),children:"Following"})]}),(0,v.jsxs)("div",{className:"listing-content",style:{display:0===ee?"block":"none"},children:[(0,v.jsxs)("div",{className:"row1",children:[(0,v.jsxs)("h5",{children:[(null===h||void 0===h?void 0:h.id)!==(null===x||void 0===x?void 0:x.id)?null===h||void 0===h?void 0:h.display_name:"You"," have ",(null===h||void 0===h||null===(s=h.products)||void 0===s?void 0:s.length)||0," listing(s)"]}),(0,v.jsxs)("div",{className:"col-right",children:[(0,v.jsx)(f,{placeholder:"Search item name...",value:D,onChange:e=>{const s=e.target.value;if(T(s),""===s)return void Y(Q);const l=Q.filter((e=>e.product_name.toLowerCase().includes(s.toLowerCase())));Y(l)}}),(0,v.jsx)(S,{userId:t,userData:m,filteredListings:Y,authenticatedUser:g,err:N,className:"filter-item"})]})]}),(0,v.jsx)("div",{className:"prod-listing-container",children:(0,v.jsx)(H,{data:K||[],city:(null===h||void 0===h?void 0:h.city)||"",region:(null===h||void 0===h?void 0:h.region)||"",authenticatedUser:x,addToWishlist:e=>{a.Z.post("/api/addwishlist/product-".concat(e),{}).then((e=>{console.log(e.data)})).catch((e=>{console.error("Error adding item to wishlist:",e)}))},removeFromWishlist:e=>{a.Z.post("/api/removewishlist/product-".concat(e),{}).then((e=>{console.log(e.data)})).catch((e=>{console.error("Error removing item from wishlist:",e)}))},userId:null===h||void 0===h?void 0:h.id,wishlistCount:k,setWishlistCount:C,getWishlistCount:q})})]}),(0,v.jsxs)("div",{className:"reviews-content",style:{display:1===ee?"block":"none"},children:[P&&0!==P.length&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"row1",children:[(0,v.jsxs)("div",{className:"overall-rating",children:[(0,v.jsxs)("div",{className:"avg-rate-box",children:[(0,v.jsx)("div",{className:"total-avg-rate",children:U||0}),(0,v.jsx)("div",{className:"out-of-5-stars",children:"Out of 5 Stars"}),(0,v.jsx)("div",{className:"seller-rating",children:(0,v.jsx)("div",{style:{display:"flex",gap:"5px"},children:O.map(((e,s)=>(0,v.jsx)(o.QJe,{size:23,color:U>s?"#FFD800":"#bcbcbc"},s)))})})]}),(0,v.jsxs)("span",{children:["Overall rating of ",I," reviews/ratings"]})]}),(0,v.jsx)("div",{className:"vl"}),(0,v.jsxs)("div",{className:"progress-rating",children:[(0,v.jsxs)("div",{className:"progress-bar-box",children:[(0,v.jsx)("div",{className:"progress-stars",children:(0,v.jsx)("div",{style:{display:"flex"},children:O.map(((e,s)=>(0,v.jsx)(o.QJe,{size:17,color:5>s?"#FFD800":"#bcbcbc"},s)))})}),(0,v.jsx)("div",{class:"progress-bar-container",children:(0,v.jsx)("div",{class:"five-star-bar",style:{width:"".concat(20*((null===R||void 0===R?void 0:R[5])||0),"%")}})}),(0,v.jsx)("span",{children:null===R||void 0===R?void 0:R[5]})]}),(0,v.jsx)("div",{className:"progress-bar-box",children:(0,v.jsxs)("div",{className:"progress-bar-box",children:[(0,v.jsx)("div",{className:"progress-stars",children:(0,v.jsx)("div",{style:{display:"flex"},children:O.map(((e,s)=>(0,v.jsx)(o.QJe,{size:17,color:4>s?"#FFD800":"#bcbcbc"},s)))})}),(0,v.jsx)("div",{class:"progress-bar-container",children:(0,v.jsx)("div",{class:"four-star-bar",style:{width:"".concat(20*((null===R||void 0===R?void 0:R[4])||0),"%")}})}),(0,v.jsx)("span",{children:null===R||void 0===R?void 0:R[4]})]})}),(0,v.jsxs)("div",{className:"progress-bar-box",children:[(0,v.jsx)("div",{className:"progress-stars",children:(0,v.jsx)("div",{style:{display:"flex"},children:O.map(((e,s)=>(0,v.jsx)(o.QJe,{size:17,color:3>s?"#FFD800":"#bcbcbc"},s)))})}),(0,v.jsx)("div",{class:"progress-bar-container",children:(0,v.jsx)("div",{class:"three-star-bar",style:{width:"".concat(20*((null===R||void 0===R?void 0:R[3])||0),"%")}})}),(0,v.jsx)("span",{children:null===R||void 0===R?void 0:R[3]})]}),(0,v.jsxs)("div",{className:"progress-bar-box",children:[(0,v.jsx)("div",{className:"progress-stars",children:(0,v.jsx)("div",{style:{display:"flex"},children:O.map(((e,s)=>(0,v.jsx)(o.QJe,{size:17,color:2>s?"#FFD800":"#bcbcbc"},s)))})}),(0,v.jsx)("div",{class:"progress-bar-container",children:(0,v.jsx)("div",{class:"two-star-bar",style:{width:"".concat(20*((null===R||void 0===R?void 0:R[2])||0),"%")}})}),(0,v.jsx)("span",{children:null===R||void 0===R?void 0:R[2]})]}),(0,v.jsxs)("div",{className:"progress-bar-box",children:[(0,v.jsx)("div",{className:"progress-stars",children:(0,v.jsx)("div",{style:{display:"flex"},children:O.map(((e,s)=>(0,v.jsx)(o.QJe,{size:17,color:1>s?"#FFD800":"#bcbcbc"},s)))})}),(0,v.jsx)("div",{class:"progress-bar-container",children:(0,v.jsx)("div",{class:"one-star-bar",style:{width:"".concat(20*((null===R||void 0===R?void 0:R[1])||0),"%")}})}),(0,v.jsx)("span",{children:null===R||void 0===R?void 0:R[1]})]})]})]}),(0,v.jsx)("div",{className:"row2"})]}),(0,v.jsxs)("div",{className:"row3 profile-review-container",children:[P&&P.length>0?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"review-btns",children:[(0,v.jsx)("button",{className:"review-tab ".concat(""===J?"active":""),onClick:()=>ie(""),children:"All Reviews"}),(0,v.jsx)("button",{className:"review-tab ".concat("Buyer"===J?"active":""),onClick:()=>ie("Buyer"),children:"Buyer Reviews"}),(0,v.jsx)("button",{className:"review-tab ".concat("Seller"===J?"active":""),onClick:()=>ie("Seller"),children:"Seller Reviews"})]}),(0,v.jsxs)("div",{className:"reviews-container",style:{display:""===J?"block":"none"},children:[(0,v.jsx)(M.Z,{posts:G}),(0,v.jsx)("div",{className:"pagination-container",children:(0,v.jsx)(W.Z,{paginate:X,postsPerPage:5,totalPosts:F.length,currentPage:V})})]})]}):(0,v.jsxs)("div",{className:"no-review-message-container",children:[(0,v.jsx)("div",{className:"no-review-icon",children:(0,v.jsx)(B.r,{})}),(0,v.jsxs)("h5",{children:[null===h||void 0===h?void 0:h.display_name," does not yet have any reviews."]})]}),(0,v.jsx)("div",{className:"reviews-container",style:{display:"Buyer"===J?"block":"none"},children:F&&F.length>0?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(M.Z,{posts:G}),(0,v.jsx)("div",{className:"pagination-container",children:(0,v.jsx)(W.Z,{paginate:X,postsPerPage:5,totalPosts:F.length,currentPage:V})})]}):(0,v.jsxs)("div",{className:"no-review-message-container",children:[(0,v.jsx)("div",{className:"no-review-icon",children:(0,v.jsx)(B.r,{})}),(0,v.jsxs)("h5",{children:[null===h||void 0===h?void 0:h.display_name," does not yet have any buyer reviews."]})]})}),(0,v.jsx)("div",{className:"reviews-container",style:{display:"Seller"===J?"block":"none"},children:F&&F.length>0?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(M.Z,{posts:G}),(0,v.jsx)("div",{className:"pagination-container",children:(0,v.jsx)(W.Z,{paginate:X,postsPerPage:5,totalPosts:F.length,currentPage:V})})]}):(0,v.jsxs)("div",{className:"no-review-message-container",children:[(0,v.jsx)("div",{className:"no-review-icon",children:(0,v.jsx)(B.r,{})}),(0,v.jsxs)("h5",{children:[null===h||void 0===h?void 0:h.display_name," does not yet have any seller reviews."]})]})})]})]}),(0,v.jsx)("div",{className:"followers-list",style:{display:2===ee?"block":"none"},children:(0,v.jsx)(j,{data:h})}),(0,v.jsx)("div",{className:"followers-list",style:{display:3===ee?"block":"none"},children:(0,v.jsx)(p,{data:h})})]})})]})]})})}),(0,v.jsx)(r.Z,{})]})})}},6559:()=>{},6172:()=>{}}]);
//# sourceMappingURL=4788.a8575490.chunk.js.map
"use strict";(self.webpackChunkyogeek=self.webpackChunkyogeek||[]).push([[1636],{487:(e,l,a)=>{a.d(l,{r:()=>o});var i,s=a(2791);function t(){return t=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var a=arguments[l];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},t.apply(this,arguments)}function n(e,l){let{title:a,titleId:n,...o}=e;return s.createElement("svg",t({viewBox:"0 0 130 130",xmlns:"http://www.w3.org/2000/svg",ref:l,"aria-labelledby":n},o),a?s.createElement("title",{id:n},a):null,i||(i=s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M65 14.4444C58.361 14.4444 51.7869 15.7521 45.6532 18.2928C39.5195 20.8334 33.9463 24.5573 29.2518 29.2518C24.5573 33.9463 20.8334 39.5195 18.2928 45.6532C15.7521 51.7869 14.4444 58.361 14.4444 65C14.4444 71.6391 15.7521 78.2131 18.2928 84.3468C20.8334 90.4805 24.5573 96.0537 29.2518 100.748C33.9463 105.443 39.5195 109.167 45.6532 111.707C51.7869 114.248 58.361 115.556 65 115.556C78.4082 115.556 91.2672 110.229 100.748 100.748C110.229 91.2672 115.556 78.4082 115.556 65C115.556 51.5918 110.229 38.7328 100.748 29.2518C91.2672 19.7708 78.4082 14.4444 65 14.4444ZM0 65C0 47.7609 6.8482 31.2279 19.0381 19.0381C31.2279 6.8482 47.7609 0 65 0C82.2391 0 98.7721 6.8482 110.962 19.0381C123.152 31.2279 130 47.7609 130 65C130 82.2391 123.152 98.7721 110.962 110.962C98.7721 123.152 82.2391 130 65 130C47.7609 130 31.2279 123.152 19.0381 110.962C6.8482 98.7721 0 82.2391 0 65ZM72.2944 93.8889C72.2944 95.8043 71.5335 97.6413 70.1791 98.9958C68.8247 100.35 66.9877 101.111 65.0722 101.111H65C63.0845 101.111 61.2475 100.35 59.8931 98.9958C58.5387 97.6413 57.7778 95.8043 57.7778 93.8889C57.7778 91.9734 58.5387 90.1364 59.8931 88.782C61.2475 87.4276 63.0845 86.6667 65 86.6667H65.0722C66.9877 86.6667 68.8247 87.4276 70.1791 88.782C71.5335 90.1364 72.2944 91.9734 72.2944 93.8889ZM72.2222 36.1111C72.2222 34.1957 71.4613 32.3587 70.1069 31.0042C68.7525 29.6498 66.9155 28.8889 65 28.8889C63.0845 28.8889 61.2475 29.6498 59.8931 31.0042C58.5387 32.3587 57.7778 34.1957 57.7778 36.1111V72.2222C57.7778 74.1377 58.5387 75.9747 59.8931 77.3291C61.2475 78.6835 63.0845 79.4444 65 79.4444C66.9155 79.4444 68.7525 78.6835 70.1069 77.3291C71.4613 75.9747 72.2222 74.1377 72.2222 72.2222V36.1111Z"})))}const o=s.forwardRef(n);a.p},4886:(e,l,a)=>{a.r(l),a.d(l,{default:()=>C});var i=a(2791),s=(a(6009),a(2892)),t=a(9434),n=a(2213),o=(a(9655),a(6593)),c=a(960),d=a(1757),r=a(7057),u=a(9561),h=a(3535),p=a(5805),m=a(46),v=a(7148),g=a(314),x=a(3615),j=a(1424),b=a(7497),y=(a(4691),a(487)),f=a(184);const N=()=>{const[e,l]=(0,i.useState)(!0);(0,i.useEffect)((()=>(document.body.style.overflow=e?"hidden":"auto",()=>{document.body.style.overflow="auto"})),[e]);return(0,f.jsx)(f.Fragment,{children:e&&(0,f.jsx)("div",{className:"complete-modal-container",children:(0,f.jsxs)("div",{className:"modal-box",children:[(0,f.jsx)("div",{className:"exclamation-icon",children:(0,f.jsx)(y.r,{})}),(0,f.jsxs)("div",{className:"label-description",children:[(0,f.jsx)("h5",{children:"Complete Your Profile"}),(0,f.jsxs)("span",{children:["You need to complete your profile information ",(0,f.jsx)("br",{}),"before you can add an item for listing."]})]}),(0,f.jsxs)("div",{className:"buttons",children:[(0,f.jsx)(g.Z,{label:"Update Profile",onClick:()=>{window.location.href="/editprofile"}}),(0,f.jsx)(x.Z,{label:"Go Back",onClick:()=>{window.history.length>1?window.history.back():window.location.href="/"}})]})]})})})},C=()=>{const e=(0,t.I0)(),l=(0,t.v9)((e=>e.user.data)),a=null===l||void 0===l?void 0:l.id,[y,C]=(0,i.useState)(0),[w,k]=(0,i.useState)(!1),[U,_]=(0,i.useState)(""),[D,I]=(0,i.useState)(""),[L,Z]=(0,i.useState)([]),E=(0,i.useRef)(null),[S,O]=(0,i.useState)([]),[B,P]=(0,i.useState)("Brand New"),[R,F]=(0,i.useState)({product_name:"",description:"",price:0,category_id:"",product_condition:"Brand New",mailing_delivery:null,youtube_link:""}),M=e=>{C(e)},Y=e=>{const l=e.target.value;P(l),F({...R,product_condition:l})},T=e=>{const l=e.target.value,a=S.includes(l);O(a?e=>e.filter((e=>e!==l)):e=>[...e,l]),F({...R,mailing_delivery:S.length>0?S.join(" | "):null})},V=e=>{let l=null;for(const a of L){if(a.label===e){l=a;break}for(const i of a.subcategories){if(i.label===e){l=i;break}for(const a of i.subcategories)if(a.label===e){l=a;break}if(l)break}if(l)break}l&&(_(e),F({...R,category_id:l.id})),k(!1)};(0,i.useEffect)((()=>{(async()=>{try{const e=await(0,n._X)();Z(e.data)}catch(e){console.error("Error fetching data:",e)}})()}),[]),(0,i.useEffect)((()=>{const e=e=>{E.current&&!E.current.contains(e.target)&&(k(!1),Z((e=>e.map((e=>({...e,isOpen:!1}))))))};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[]);const[A,z]=(0,i.useState)([]),[W,G]=(0,i.useState)([]),[H,J]=(0,i.useState)([]),[X,q]=(0,i.useState)([]),[K,Q]=(0,i.useState)([]),$=async(l,a)=>{const i=[],s=new FormData;s.append("upload_preset","auwcvbw0"),s.append("cloud_name","yogeek-cloudinary"),s.append("folder","image"===a?"product_images":"product_videos");for(let n=0;n<l.length;n++){s.append("file",l[n]);try{e((0,d.P)(!0));const l=await fetch("https://api.cloudinary.com/v1_1/yogeek-cloudinary/".concat(a,"/upload"),{method:"POST",body:s});if(l.ok){const e=(await l.json()).secure_url;i.push(e)}else console.error("Error uploading ".concat(a," to Cloudinary:"),l.statusText)}catch(t){console.error("Error uploading ".concat(a," to Cloudinary:"),t.message)}finally{console.log("File ".concat(n+1," processed"))}}return console.log("Final fileUrls array for ".concat(a,":"),i),R.fileUrls=i,console.log("productDetails.fileUrls:",R.fileUrls),i};return(0,f.jsxs)(f.Fragment,{children:[!l.account_verified&&(0,f.jsx)(N,{}),(0,f.jsx)(o.Z,{}),(0,f.jsx)("div",{className:"add-listing-body",children:(0,f.jsxs)("form",{className:"container",children:[(0,f.jsx)("h3",{children:"What are you listing today?"}),(0,f.jsxs)("div",{className:"box",children:[(0,f.jsx)("div",{className:"col-left",children:(0,f.jsxs)("div",{className:"add-media-container",children:[(0,f.jsxs)("div",{className:"add-image-box",children:[(0,f.jsx)("div",{className:"addlisting-upload-img",children:(0,f.jsx)(u.r,{})}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"imgUpload",className:"custom-file-upload",children:(0,f.jsx)(x.Z,{type:"button",label:"Add Image",className:"add-img-btn",onClick:()=>{document.getElementById("imgUpload").click()}})}),(0,f.jsx)("input",{type:"file",id:"imgUpload",multiple:!0,accept:"image/*",onChange:e=>{const l=e.target.files,a=Array.from(l);if(a.length+W.length>10)return void alert("You can only select up to ".concat(10," images."));const i=[];a.forEach((e=>{if(!e.type.startsWith("image/"))return void alert("Only image files are allowed.");if(e.size>2097152)return void alert("Selected images exceed the maximum file size of 2 MB.");const l=new FileReader;l.onload=e=>{i.push(e.target.result),i.length===a.length&&(J((e=>[...e,...i])),G((e=>[...e,...a])))},l.readAsDataURL(e)}))},style:{display:"none"}}),(0,f.jsx)("div",{children:"(Maximum of 10 photos)"})]})]}),(0,f.jsx)("div",{className:"upload-img-preview-container",children:H.map(((e,l)=>(0,f.jsxs)("div",{className:"upload-img-box",children:[(0,f.jsx)("img",{src:e,alt:"Img ".concat(l),className:"upload-img-preview"}),(0,f.jsx)("div",{onClick:()=>(e=>{const l=H.filter(((l,a)=>a!==e)),a=W.filter(((l,a)=>a!==e));J(l),G(a)})(l),className:"upload-img-close"})]},l)))}),(0,f.jsxs)("div",{className:"add-video-container",children:[(0,f.jsx)("span",{className:"title-video",children:"Video"}),(0,f.jsxs)("div",{className:"upload-vid-options",children:[(0,f.jsx)("div",{children:(0,f.jsxs)("label",{htmlFor:"uploadvidID",className:"radio-container",children:["Upload Video",(0,f.jsx)("input",{type:"radio",id:"uploadvidID",checked:0===y,className:"".concat(0===y?"active":""),onClick:()=>M(0)}),(0,f.jsx)("span",{className:"checkmark"})]})}),(0,f.jsx)("div",{children:(0,f.jsxs)("label",{htmlFor:"youtubelinkID",className:"radio-container",children:["Embed Youtube",(0,f.jsx)("input",{type:"radio",id:"youtubelinkID",checked:1===y,className:"".concat(1===y?"active":""),onClick:()=>M(1)}),(0,f.jsx)("span",{className:"checkmark"})]})})]}),(0,f.jsx)("div",{style:{display:0===y?"block":"none"},children:(0,f.jsxs)("div",{className:"upload-video-content",children:[K.length>0?(0,f.jsxs)("div",{className:"video-preview-container",children:[(0,f.jsxs)("video",{width:"498",height:"280",controls:!0,children:[(0,f.jsx)("source",{src:K[0],type:"video/mp4"}),"Your browser does not support the video tag."]}),(0,f.jsx)("div",{className:"remove-video-preview",onClick:()=>{Q([]),q([])}})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("label",{htmlFor:"videoUpload",children:(0,f.jsxs)("button",{type:"button",className:"upload-video-box",onClick:()=>{document.getElementById("videoUpload").click()},children:[(0,f.jsx)("div",{className:"addlisting-upload-vid",children:(0,f.jsx)(h.r,{})}),(0,f.jsx)("span",{children:"Add Video"})]})}),(0,f.jsx)("div",{children:(0,f.jsxs)("ul",{children:[(0,f.jsx)("li",{children:"Min size: 480x480 px. max video length: 60 seconds. max file size: 100MB."}),(0,f.jsx)("li",{children:"Supported Format: mp4"}),(0,f.jsx)("li",{children:"New Video might take up to 36 hrs to be approved"})]})})]}),(0,f.jsx)("input",{type:"file",id:"videoUpload",accept:"video/*",style:{display:"none"},onChange:e=>{const l=e.target.files;if(l.length>1)return void alert("You can only select up to ".concat(1," video."));const a=l[0];if(!a.type.startsWith("video/"))return void alert("Only video files are allowed.");if(a.size>52428800)return void alert("The selected video exceeds the maximum file size of 50 MB.");const i=new FileReader;i.onload=e=>{Q([e.target.result]),q([a])},i.readAsDataURL(a)}})]})}),(0,f.jsxs)("div",{style:{display:1===y?"block":"none"},children:[(0,f.jsx)(p.Z,{name:"youtube_link",value:R.youtube_link,placeholder:"Paste your Youtube Embed URL here",className:"input-youtube-link",onChange:e=>F({...R,youtube_link:e.target.value})}),(0,f.jsx)("h6",{className:"embed-youtube-instructions",children:"Please follow instructions on how to embed youtube video."}),(0,f.jsx)("b",{children:"1. Get the Youtube Link:"}),(0,f.jsxs)("p",{children:["Get the YouTube video ID from the video URL. For example, in the URL ",(0,f.jsx)("span",{className:"youtube-link",children:"https://www.youtube.com/watch?v=VIDEO_ID"}),", ",(0,f.jsx)("span",{className:"video-id",children:'"VIDEO_ID"'})," is the actual video ID."]}),(0,f.jsx)("b",{children:"2. Create Youtube Embed URL:"}),(0,f.jsx)("p",{children:"Use the YouTube video ID to create the YouTube embed URL. See sample URL below."}),(0,f.jsx)("span",{className:"sample-embed-url-label",children:"Sample Youtube Embed URL:"}),(0,f.jsx)("p",{className:"sample-embed-url",children:"https://youtube.com/embed/VIDEO_ID"})]})]})]})}),(0,f.jsx)("div",{className:"col-right",children:(0,f.jsxs)("div",{className:"select-category-container",children:[(0,f.jsxs)("div",{className:"wrapper",ref:E,children:[(0,f.jsx)("div",{className:"select-arrow ".concat(w?"active":""),onClick:()=>{k(!w)}}),(0,f.jsx)("div",{className:"dropdown-category",children:(0,f.jsx)("input",{type:"text",id:"selectCategory",value:U,placeholder:"Select Category",readOnly:!0})}),w&&(0,f.jsx)("div",{className:"category-option-list",children:(0,f.jsxs)("ul",{children:[(0,f.jsx)("li",{children:(0,f.jsxs)("div",{className:"search-container",children:[(0,f.jsx)("input",{type:"text",placeholder:"Search Categories",value:D,onChange:e=>{I(e.target.value)}}),(0,f.jsx)("div",{className:"magnifying-glass",children:(0,f.jsx)(r.r,{})})]})}),L.map((e=>e.label.toLowerCase().includes(D.toLowerCase())?(0,f.jsxs)("li",{className:"main-category",children:[(0,f.jsxs)("div",{className:"parent-category ".concat(e.subcategories.length>0?"collapsible":""," ").concat(e.isOpen&&e.subcategories.length>0?"active":""),onClick:()=>{var l;0===e.subcategories.length?V(e.label):(l=e,Z((e=>e.map((e=>e===l?{...e,isOpen:!e.isOpen}:{...e,isOpen:!1})))))},children:[(0,f.jsx)("img",{src:e.icon,alt:""}),e.label]}),e.isOpen&&e.subcategories&&e.subcategories.length>0?(0,f.jsx)("ul",{className:"sub-category",children:e.subcategories.map((l=>(0,f.jsxs)("li",{children:[(0,f.jsx)("div",{className:"first-level-sub-category ".concat(l.subcategories.length>0?"collapsible":""," ").concat(l.isOpen&&l.subcategories.length>0?"active":""),onClick:()=>{0===l.subcategories.length?V(l.label):((e,l)=>{l.subcategories=l.subcategories.map((l=>l===e?{...l,isOpen:!l.isOpen}:{...l,isOpen:!1})),Z([...L])})(l,e)},children:l.label}),l.isOpen&&l.subcategories&&l.subcategories.length>0?(0,f.jsx)("ul",{className:"sub-sub-category",children:l.subcategories.map((e=>(0,f.jsx)("li",{children:(0,f.jsx)("div",{className:"second-level-sub-category",onClick:()=>V(e.label),children:e.label})},e.value)))}):null]},l.value)))}):null]},e.value):null))]})})]}),"Nike"===U&&(0,f.jsx)("div",{children:(0,f.jsx)("h3",{children:"Nike"})}),"Adidas"===U&&(0,f.jsx)("div",{children:(0,f.jsx)("h3",{children:"Adidas"})}),"New Balance"===U&&(0,f.jsx)("div",{children:(0,f.jsx)("h3",{children:"New Balance"})}),U&&"Nike"!==U&&"Adidas"!==U&&"New Balance"!==U&&(0,f.jsxs)("div",{className:"add-prod-details-form",children:[(0,f.jsx)("input",{type:"hidden",name:"category_id",value:R.category_id,onChange:e=>F({...R,category_id:e.target.value})}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{children:"Title"}),(0,f.jsx)(p.Z,{type:"text",id:"listingTitleID",name:"product_name",value:R.product_name,className:"listing-input-field",placeholder:"Listing Title",onChange:e=>F({...R,product_name:e.target.value})})]}),(0,f.jsx)("h3",{children:"About the item"}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{children:"Condition"}),(0,f.jsxs)("div",{className:"product-conditions",children:[(0,f.jsx)(m.Z,{id:"brandNewID",name:"product_condition",value:"Brand New",label:"Brand New",checked:"Brand New"===B,onChange:Y}),(0,f.jsx)(m.Z,{id:"likeNewID",name:"product_condition",value:"Like New",label:"Like New",checked:"Like New"===B,onChange:Y}),(0,f.jsx)(m.Z,{id:"lightlyUsedID",name:"product_condition",value:"Lightly Used",label:"Lightly Used",checked:"Lightly Used"===B,onChange:Y}),(0,f.jsx)(m.Z,{id:"wellUsedID",name:"product_condition",value:"Well Used",label:"Well Used",checked:"Well Used"===B,onChange:Y}),(0,f.jsx)(m.Z,{id:"heavilyUsedID",name:"product_condition",value:"Heavily Used",label:"Heavily Used",checked:"Heavily Used"===B,onChange:Y})]})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{children:"Price"}),(0,f.jsxs)("div",{className:"listing-price-container",children:[(0,f.jsx)("div",{className:"listing-currency",children:"\u20b1"}),(0,f.jsx)(p.Z,{type:"number",id:"listingPriceID",name:"price",value:R.price,className:"listing-price-input-field",placeholder:"Price of your listing",onChange:e=>F({...R,price:e.target.value})})]})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{children:"Description"}),(0,f.jsx)("div",{children:(0,f.jsx)(b.Z,{id:"listingDescID",name:"description",className:"listing-description",value:R.description,onChange:e=>{F({...R,description:e})}})})]}),(0,f.jsx)("h3",{children:"Deal Method"}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{children:"Meet Up"}),(0,f.jsx)("span",{style:{fontSize:"14px"},children:" (Maximum of 4 locations)"}),(0,f.jsx)(j.Z,{onSelectedPlacesChange:e=>{z(e)}})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{children:"Mailing & Delivery"}),(0,f.jsxs)("div",{className:"delivery-options",children:[(0,f.jsxs)("div",{className:"delivery-options-col1",children:[(0,f.jsx)(v.Z,{label:"Lalamove",value:"Lalamove",onChange:T}),(0,f.jsx)(v.Z,{label:"Grab Express",value:"Grab Express",onChange:T}),(0,f.jsx)(v.Z,{label:"Ninja Van",value:"Ninja Van",onChange:T})]}),(0,f.jsxs)("div",{className:"delivery-options-col2",children:[(0,f.jsx)(v.Z,{label:"LBC",value:"LBC",onChange:T}),(0,f.jsx)(v.Z,{label:"J&T",value:"J&T",onChange:T})]})]})]}),(0,f.jsxs)("div",{className:"update-listing-btns",children:[(0,f.jsx)(g.Z,{label:"List Now",onClick:async l=>{if(l.preventDefault(),!R.product_name)return void alert("Please enter a title for your listing.");if(R.product_name.length<5)return void alert("Title must be at least 5 characters long.");if(!R.price||isNaN(R.price)||R.price<=0)return void alert("Please enter a valid price for your listing.");if(0===W.length)return void alert("Please upload at least one image for your listing.");const a=await $(W,"image"),i=await $(X,"video"),t={...R,fileUrls:[...a,...i],meetupLocations:A.map((e=>({placeId:e.placeId,name:e.name,address:e.address,latitude:e.latitude,longitude:e.longitude})))};console.log("productDetailsWithFiles:",t),s.Z.post("/api/addnewproduct",t).then((l=>{e((0,d.P)(!0)),console.log("Product added successfully:",l.data);const a=l.data.id,i=l.data.product_name;window.location.href="/addlistingsuccess/".concat(a,"/").concat(encodeURIComponent(i))})).catch((l=>{e((0,d.P)(!1)),console.error("Error adding the product:",l)}))},className:"list-now-btn"}),(0,f.jsx)(x.Z,{type:"button",label:"Cancel",onClick:()=>{window.location.href="/profile/".concat(a)}})]})]})]})})]})]})}),(0,f.jsx)(c.Z,{})]})}}}]);
//# sourceMappingURL=1636.98eed740.chunk.js.map
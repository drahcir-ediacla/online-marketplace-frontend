"use strict";(self.webpackChunkyogeek=self.webpackChunkyogeek||[]).push([[3079],{1265:(e,s,i)=>{i.d(s,{Z:()=>a});i(2791),i(5509);var n=i(184);const a=e=>{let{onClick:s,className:i,label:a,arrowStyle:t}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("button",{className:"custom-filterby-button ".concat(i),onClick:s,children:[(0,n.jsx)("span",{children:a}),(0,n.jsx)("div",{className:"filterby-arrow-down",style:t})]})})}},6431:(e,s,i)=>{i.d(s,{Z:()=>u});var n=i(2791),a=i(1663),t=i(6704),r=i(1087),l=(i(4628),i(4015)),c=i(2267),o=i(1846),d=i(7206),h=i(184);const u=e=>{let{data:s,addToWishlist:i,removeFromWishlist:u,userId:m,wishlistCount:x,setWishlistCount:g,getWishlistCount:j}=e;const[p,v]=(0,n.useState)({}),[y,N]=(0,n.useState)({}),f=(0,n.useRef)(null);if((0,n.useEffect)((()=>{const e=e=>{!f.current||f.current.contains(e.target)||e.target.classList.contains("heart-icon")||N({})};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]),(0,n.useEffect)((()=>{(async()=>{try{const e={};s.forEach((s=>{const i=Array.isArray(s.wishlist)&&s.wishlist.some((e=>String(e.user_id)===String(m)));e[s.id]=i})),v(e)}catch(e){console.error("Error fetching data:",e)}})()}),[s,m]),!s||!Array.isArray(s)||0===s.length)return null;const w=(e,s)=>e?e.length>s?e.substring(0,s)+"...":e:"";return(0,h.jsx)(h.Fragment,{children:s.map(((e,n)=>{const b=new Date(e.createdAt);if(isNaN(b.getTime()))return console.error("Invalid date value:",e.createdAt),null;return(0,h.jsxs)("div",{className:"thumbnail-container",children:[(0,h.jsx)(r.rU,{to:"/productdetails/".concat(e.id,"/").concat(encodeURIComponent(e.product_name)),children:(0,h.jsxs)("div",{className:"image-holder",children:[e.images&&e.images[0]&&(0,h.jsx)("img",{src:e.images[0].image_url||d,alt:"Product ".concat(n),className:"product-img"}),!e.images&&(0,h.jsx)("img",{src:d,alt:"No Images Available",className:"product-img"})]})}),(0,h.jsxs)("div",{className:"product-info",children:[(0,h.jsx)(r.rU,{to:"/productdetails/".concat(e.id,"/").concat(encodeURIComponent(e.product_name)),className:"product-name",children:(0,h.jsx)("p",{children:w(e.product_name,55)})}),e.seller&&(0,h.jsxs)("small",{children:[e.seller.city||"",", ",w(e.seller.region,15)||""]}),(0,h.jsxs)("div",{className:"date-post",children:[(0,h.jsx)("div",{className:"small-clock",children:(0,h.jsx)(l.r,{})}),(0,h.jsx)("small",{children:(0,a.Z)(new Date(e.createdAt),{addSuffix:!0,locale:t.Z})})]})]}),(0,h.jsxs)("div",{className:"prod-condition-price",children:[(0,h.jsxs)("div",{className:"col-price",children:[(0,h.jsx)("small",{children:e.product_condition}),(0,h.jsx)("div",{className:"price",children:(k=e.price,new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP",minimumFractionDigits:2,maximumFractionDigits:2}).format(k).replace(/\.00$/,""))})]}),(0,h.jsxs)("div",{className:"col-wishlist",children:[y[e.id]&&!m&&(0,h.jsxs)("div",{ref:f,className:"add-wishlist-sign-in",children:[(0,h.jsx)("h6",{children:"You like this item?"}),(0,h.jsx)("p",{children:"Sign in to add this item to your wishlist"}),(0,h.jsx)(r.rU,{to:"/loginemail",children:"Sign in"})]}),(0,h.jsx)("div",{className:"wishlist-counter",children:x[e.id]||""}),(0,h.jsx)("button",{onClick:()=>(async e=>{try{const n=p[e]||!1;if(!m)return void N((s=>({...s,[e]:!s[e]})));n?await u(e):await i(e),v((s=>({...s,[e]:!s[e]})));const a={};s.forEach((e=>{a[e.id]=j(e.id)})),g(a)}catch(n){console.error("Error updating wishlist:",n)}})(e.id),className:"heart-icon",children:p[e.id]?(0,h.jsx)(o.r,{}):(0,h.jsx)(c.r,{})})]})]})]},n);var k}))})}},5805:(e,s,i)=>{i.d(s,{Z:()=>a});i(2791),i(4166);var n=i(184);const a=e=>{let{id:s,name:i,value:a,type:t,ref:r,className:l,style:c,placeholder:o,onChange:d,onKeyDown:h,onKeyPress:u,onFocus:m,disabled:x,defaultValue:g,readOnly:j}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("input",{type:t,id:s,name:i,value:a,ref:r,onChange:d,onKeyDown:h,onKeyPress:u,onFocus:m,disabled:x,defaultValue:g,readOnly:j,className:"custom-input ".concat(l),style:c,placeholder:o})})}},46:(e,s,i)=>{i.d(s,{Z:()=>a});i(2791),i(4166);var n=i(184);const a=function(e){const{id:s,name:i,value:a,label:t,checked:r,className:l,onChange:c,onClick:o}=e;return(0,n.jsx)("div",{children:(0,n.jsxs)("label",{htmlFor:s,className:"radio-container",children:[t,(0,n.jsx)("input",{type:"radio",id:s,name:i,value:a,checked:r,className:l,onChange:c,onClick:o}),(0,n.jsx)("span",{className:"checkmark"})]})})}},3079:(e,s,i)=>{i.r(s),i.d(s,{default:()=>v});var n=i(2791),a=i(7689),t=i(9434),r=i(2892),l=i(2213),c=i(6593),o=i(960),d=(i(6559),i(1265)),h=i(7148),u=i(5805),m=i(3615),x=i(314),g=i(46),j=i(184);var p=i(6431);const v=()=>{const e=(0,a.TH)(),s=(0,n.useRef)(null),i=(0,t.v9)((e=>e.user.data)),v=new URLSearchParams(e.search).get("keyword"),y=new URLSearchParams(e.search).get("location"),N=new URLSearchParams(e.search).get("latitude"),f=new URLSearchParams(e.search).get("longitude"),w=new URLSearchParams(e.search).get("radius"),[b,k]=(0,n.useState)(1),[C,S]=(0,n.useState)(1),[P,Z]=(0,n.useState)(null),[L]=(0,n.useState)(30),[U,E]=(0,n.useState)(!1),[F,R]=(0,n.useState)(null),[H,W]=(0,n.useState)(!1),[A,D]=(0,n.useState)("Most Recent"),[T,M]=(0,n.useState)({condition:[],sort:""}),[B,I]=(0,n.useState)({minPrice:"",maxPrice:""}),[K,O]=(0,n.useState)([]),[_,q]=(0,n.useState)({});(0,n.useEffect)((()=>{M({condition:[],sort:""}),I({minPrice:"",maxPrice:""}),W(!1)}),[]),(0,n.useEffect)((()=>{const e=e=>{s.current&&!s.current.contains(e.target)&&R(null)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[]);(0,n.useEffect)((()=>{!async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{const s={...T,...B,keyword:v,location:y,sort:T.sort,latitude:"Listings Nearby"===y?N:void 0,longitude:"Listings Nearby"===y?f:void 0,radius:"Listings Nearby"===y?w:void 0,page:e,limit:L},i=await r.Z.get("/api/search",{params:s});O(i.data.products),Z(i.data.totalProducts),S(i.data.totalPages)}catch(s){console.error("Error fetching search results:",s)}}(b)}),[b,e.search,v,y,T,H]);const V=e=>{e>=1&&e<=C&&k(e)},Y=e=>{R(F===e?null:e)},$=e=>{const s=e.target.value;D(s),M((e=>({...e,sort:s})))},X=e=>{const{name:s,value:i,checked:n}=e.target;M((e=>({...e,[s]:"condition"===s?n?[...e.condition,i]:e.condition.filter((e=>e!==i)):i})))},z=e=>{const{name:s,value:i}=e.target;I((e=>({...e,[s]:i})))},G=()=>{W(!0)},J=e=>{"Enter"===e.key&&G()},Q=(0,n.useCallback)((e=>{const s=K.find((s=>s.id===e));return s&&s.wishlist?s.wishlist.length:0}),[K]);return(0,n.useEffect)((()=>{const e={};K.forEach((s=>{e[s.id]=Q(s.id)})),q(e),console.log("Wishlist count updated:",e)}),[K,Q]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(c.Z,{}),(0,j.jsx)("div",{className:"container",children:(0,j.jsxs)("div",{className:"search-result-body",children:[(0,j.jsx)("div",{className:"row2 search-result-banner",children:"Your ADS Here"}),(0,j.jsxs)("div",{className:"row3 search-result-newly-listed",children:[(0,j.jsx)("div",{className:"search-result-newly-listed-row1",children:(0,j.jsxs)("div",{className:"product-section-title",children:[(0,j.jsxs)("h4",{children:['Search Results for "',v,'" in ',y]}),(0,j.jsxs)("h5",{children:["Total Results: ",P]})]})}),(0,j.jsx)("div",{className:"search-result-newly-listed-row2",children:(0,j.jsx)("div",{className:"prod-filter-container",ref:s,children:(0,j.jsxs)("div",{className:"group-filterby",children:[(0,j.jsxs)("div",{className:"filter-sortby",children:[(0,j.jsx)(d.Z,{label:"Sort By",arrowStyle:"sortByFilter"===F?{transform:"rotate(-180deg)",transition:"0.5s ease"}:{transform:"none",transition:"0.5s ease"},onClick:()=>Y("sortByFilter")}),"sortByFilter"===F&&(0,j.jsxs)("ul",{className:"filter-sortby-options",children:[(0,j.jsx)("li",{children:(0,j.jsx)(g.Z,{id:"mostRecent",name:"sort",value:"recent",label:"Most Recent",checked:"Most Recent"===A||T.sort.includes("recent"),onChange:$})}),(0,j.jsx)("li",{children:(0,j.jsx)(g.Z,{id:"priceHighToLow",name:"sort",value:"highToLow",label:"Price - High to Low",checked:"Price - High to Low"===A||T.sort.includes("highToLow"),onChange:$})}),(0,j.jsx)("li",{children:(0,j.jsx)(g.Z,{id:"priceLowtoHigh",name:"sort",value:"lowToHigh",label:"Price - Low to High",checked:"Price - Low to High"===A||T.sort.includes("lowToHigh"),onChange:$})})]})]}),(0,j.jsxs)("div",{className:"filter-condition",children:[(0,j.jsx)(d.Z,{label:"Condition",arrowStyle:"condition"===F?{transform:"rotate(-180deg)",transition:"0.5s ease"}:{transform:"none",transition:"0.5s ease"},onClick:()=>Y("condition")}),"condition"===F&&(0,j.jsxs)("ul",{className:"filter-condition-options",children:[(0,j.jsx)("li",{children:(0,j.jsx)(h.Z,{name:"condition",label:"Brand New",value:"Brand New",checked:T.condition.includes("Brand New"),onChange:X})}),(0,j.jsx)("li",{children:(0,j.jsx)(h.Z,{name:"condition",label:"Like New",value:"Like New",checked:T.condition.includes("Like New"),onChange:X})}),(0,j.jsx)("li",{children:(0,j.jsx)(h.Z,{name:"condition",label:"Lightly Used",value:"Lightly Used",checked:T.condition.includes("Lightly Used"),onChange:X})}),(0,j.jsx)("li",{children:(0,j.jsx)(h.Z,{name:"condition",label:"Well Used",value:"Well Used",checked:T.condition.includes("Well Used"),onChange:X})}),(0,j.jsx)("li",{children:(0,j.jsx)(h.Z,{name:"condition",label:"Heavily Used",value:"Heavily Used",checked:T.condition.includes("Heavily Used"),onChange:X})})]})]}),(0,j.jsxs)("div",{className:"filter-deal-option",children:[(0,j.jsx)(d.Z,{label:"Deal Option",arrowStyle:"dealOption"===F?{transform:"rotate(-180deg)",transition:"0.5s ease"}:{transform:"none",transition:"0.5s ease"},onClick:()=>Y("dealOption")}),"dealOption"===F&&(0,j.jsxs)("ul",{className:"filter-deal-options",children:[(0,j.jsx)("li",{children:(0,j.jsx)(h.Z,{label:"Meet Up",value:"Meet Up"})}),(0,j.jsx)("li",{children:(0,j.jsx)(h.Z,{label:"Mailing and Delivery",value:"Mailing and Delivery"})})]})]}),(0,j.jsxs)("div",{className:"filter-price",children:[(0,j.jsx)(d.Z,{label:"Price",arrowStyle:"priceFilter"===F?{transform:"rotate(-180deg)",transition:"0.5s ease"}:{transform:"none",transition:"0.5s ease"},onClick:()=>Y("priceFilter")}),"priceFilter"===F&&(0,j.jsxs)("div",{className:"filter-price-input",children:[(0,j.jsx)("p",{children:"Show item price from"}),(0,j.jsxs)("div",{className:"filter-price-row1",children:[(0,j.jsxs)("div",{className:"input-price-filter-container",children:[(0,j.jsx)("span",{className:"php-symbol",children:"\u20b1"}),(0,j.jsx)(u.Z,{type:"number",name:"minPrice",value:B.minPrice,onChange:z,onKeyPress:J,className:"input-price-filter",placeholder:"Minimum"})]}),"-",(0,j.jsxs)("div",{className:"input-price-filter-container",children:[(0,j.jsx)("span",{className:"php-symbol",children:"\u20b1"}),(0,j.jsx)(u.Z,{type:"number",name:"maxPrice",value:B.maxPrice,onChange:z,onKeyPress:J,className:"input-price-filter",placeholder:"Maximum"})]})]}),(0,j.jsx)("hr",{}),(0,j.jsxs)("div",{className:"filter-price-row2",children:[(0,j.jsx)(m.Z,{label:"Reset",onClick:()=>{I({minPrice:"",maxPrice:""}),W(!1);const e=document.querySelector('input[name="minPrice"]'),s=document.querySelector('input[name="maxPrice"]');e&&s&&(e.value="",s.value="")}}),(0,j.jsx)(x.Z,{label:"Apply",onClick:G,className:"apply-price-range"})]})]})]})]})})}),(0,j.jsx)("div",{className:"search-result-newly-listed-row3",children:(0,j.jsx)(p.Z,{data:K||[],addToWishlist:async e=>{try{const s=await(0,l.X$)(e,{});console.log(s.data)}catch(s){console.error("Error adding item to wishlist:",s)}},removeFromWishlist:async e=>{try{const s=await(0,l.EB)(e,{});console.log(s.data)}catch(s){console.error("Error removing item from wishlist:",s)}},userId:null===i||void 0===i?void 0:i.id,wishlistCount:_,setWishlistCount:q,getWishlistCount:Q})}),P>30&&(0,j.jsxs)("div",{className:"pagination",children:[(0,j.jsx)("li",{className:"page-item",children:(0,j.jsx)("button",{onClick:()=>V(b-1),disabled:1===b,className:"page-link",children:"Previous"})}),Array.from({length:C},((e,s)=>s+1)).map((e=>(0,j.jsx)("li",{className:"page-item",children:(0,j.jsx)("button",{onClick:()=>V(e),className:e===b?"active page-link":"page-link",children:e})},e))),(0,j.jsx)("li",{className:"page-item",children:(0,j.jsx)("button",{onClick:()=>V(b+1),disabled:b===C,className:"page-link",children:"Next"})})]})]})]})}),(0,j.jsx)(o.Z,{})]})}},4166:()=>{},6559:()=>{}}]);
//# sourceMappingURL=3079.5e9d8a6d.chunk.js.map
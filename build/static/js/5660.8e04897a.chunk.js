"use strict";(self.webpackChunkyogeek=self.webpackChunkyogeek||[]).push([[5660],{2529:(e,s,i)=>{i.d(s,{r:()=>l});var a,t=i(2791);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var i=arguments[s];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},n.apply(this,arguments)}function c(e,s){let{title:i,titleId:c,...l}=e;return t.createElement("svg",n({viewBox:"0 0 4 15",xmlns:"http://www.w3.org/2000/svg",ref:s,"aria-labelledby":c},l),i?t.createElement("title",{id:c},i):null,a||(a=t.createElement("path",{d:"M2.0263 11.1111C3.11535 11.1111 3.99998 11.9826 3.99998 13.0556C3.99998 14.1285 3.11535 15 2.0263 15C0.937246 15 0.0526123 14.1285 0.0526123 13.0556C0.0526123 11.9826 0.937246 11.1111 2.0263 11.1111ZM2.0263 5.55556C3.11535 5.55556 3.99998 6.42708 3.99998 7.5C3.99998 8.57292 3.11535 9.44444 2.0263 9.44444C0.937246 9.44444 0.0526123 8.57292 0.0526123 7.5C0.0526123 6.42708 0.937246 5.55556 2.0263 5.55556ZM3.99998 1.94444C3.99998 3.01736 3.11535 3.88889 2.0263 3.88889C0.937246 3.88889 0.0526123 3.01736 0.0526123 1.94444C0.0526123 0.871528 0.937246 0 2.0263 0C3.11535 0 3.99998 0.871528 3.99998 1.94444Z"})))}const l=t.forwardRef(c);i.p},5470:(e,s,i)=>{i.d(s,{Z:()=>t});i(2791),i(5509);var a=i(184);const t=e=>{let{label:s,onClick:i,className:t,active:n}=e;return(0,a.jsx)("button",{className:"category-button ".concat(n?"active":""," ").concat(t),onClick:i,children:s})}},5805:(e,s,i)=>{i.d(s,{Z:()=>t});i(2791),i(4166);var a=i(184);const t=e=>{let{id:s,name:i,value:t,type:n,ref:c,className:l,style:o,placeholder:r,onChange:d,onKeyDown:u,onKeyPress:m,onFocus:f,disabled:v,defaultValue:h,readOnly:x}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("input",{type:n,id:s,name:i,value:t,ref:c,onChange:d,onKeyDown:u,onKeyPress:m,onFocus:f,disabled:v,defaultValue:h,readOnly:x,className:"custom-input ".concat(l),style:o,placeholder:r})})}},7497:(e,s,i)=>{i.d(s,{Z:()=>l});var a=i(2791),t=i(6770),n=i.n(t),c=(i(6009),i(184));const l=e=>{let{className:s,value:i,onChange:t,id:l,name:o,placeholder:r}=e;const[d,u]=(0,a.useState)(!1);return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(n(),{id:l,name:o,theme:"snow",value:i,onChange:t,modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],["html"]]},className:s,placeholder:r})})}},4601:(e,s,i)=>{i.d(s,{Z:()=>p});var a=i(2791),t=i(2892),n=i(9434),c=i(4564),l=i(7385),o=i(7689),r=i(1087),d=i(5143),u=i(4781),m=i(5470),f=i(7145),v=i(8290),h=(i(5862),i(7556),i(184));const x=e=>{let{menus:s}=e;return Array(s).fill(0).map(((e,s)=>(0,h.jsx)(v.Z,{height:35,width:205,className:"side-nav-categories"})))};var j=i(1842);const p=e=>{var s;let{createdDiscussionsTab:i,joinedDiscussionsTab:v,userActivityTab:p,forumNotificationsTab:g,addDiscussionsBtn:N,discussionFilter:y,createdDiscussionsData:b,joinedDiscussionsData:w,activitiesData:C,paramsUserData:k,notifications:S,sortOptions:_,onOptionSelect:D,emptySortDiscussions:Z,className:E}=e;const T=(0,n.I0)(),A=(0,n.v9)((e=>e.user.data)),F=(0,n.v9)((e=>e.forumcategories.data)),L=(0,n.v9)((e=>e.forumtags.data)),{userId:O,tab:I}=(0,o.UO)(),U=Number(O),M=Number(null===A||void 0===A?void 0:A.id),R=(0,o.s0)(),P=(0,o.TH)(),[J,H]=(0,a.useState)(y),[B,K]=(0,a.useState)([]),[Y,G]=(0,a.useState)(Array.isArray(P.state)?P.state:[]),[V,q]=(0,a.useState)(!1),[W,z]=(0,a.useState)({}),[Q,X]=(0,a.useState)(0),[$,ee]=(0,a.useState)(0),[se,ie]=(0,a.useState)({}),[ae,te]=(0,a.useState)(!0),[ne,ce]=(0,a.useState)(!0),[le,oe]=(0,a.useState)(!1);(0,a.useEffect)((()=>{F?te(!1):(te(!0),T((0,c.y)()))}),[T,F]),(0,a.useEffect)((()=>{0===L.length?(ce(!0),T((0,l.l)())):ce(!1)}),[T,L]),(0,a.useEffect)((()=>{P.state&&P.state.selectedTags&&G(P.state.selectedTags)}),[P.state]),(0,a.useEffect)((()=>{(async()=>{try{const e=await t.Z.get("/api/user/".concat(O)),{id:s,display_name:i,profile_pic:a,createdAt:n}=e.data;z({id:s,display_name:i,profile_pic:a,createdAt:n}),k(e.data)}catch(e){console.log("Error fetching data:",e)}})()}),[O,k]),(0,a.useEffect)((()=>{null===B&&K(F[0].id)}),[F,B]),(0,a.useEffect)((()=>{(async()=>{try{const e=await t.Z.get("/api/".concat(O,"/created/discussion")),s=e.data.sort(((e,s)=>new Date(s.created_at)-new Date(e.created_at)));X(e.data.length),b(s)}catch(e){console.log("Error fetching user created discussions:",e)}})()}),[O,b]),(0,a.useEffect)((()=>{(async()=>{try{const e=await t.Z.get("/api/".concat(O,"/joined/discussion")),s=e.data.sort(((e,s)=>new Date(s.created_at)-new Date(e.created_at)));ee(e.data.length),w(s)}catch(e){console.log("Error fetching user created discussions:",e)}})()}),[O,w]),(0,a.useEffect)((()=>{(async()=>{try{const e=(await t.Z.get("/api/forum-activities/".concat(O))).data.sort(((e,s)=>new Date(s.createdAt)-new Date(e.createdAt)));C(e)}catch(e){console.log("Error fetching forum activities:",e)}})()}),[O,C]),(0,a.useEffect)((()=>{(async()=>{try{const e=await t.Z.get("/api/total-forum-notifications");ie(e.data)}catch(e){console.log("Error fetching total unread notifications",e)}})()}),[S]),(0,a.useEffect)((()=>{switch(I){case"created_discussions":i(),H(!0);break;case"joined_discussions":v(),H(!0);break;case"user_activity":p(),H(!1);break;case"notifications":g(),H(!1);break;case"add_discussions":N(),H(!1)}}),[I,R,i,v,p,g,N]);const re=()=>{R("/forum/profile/".concat(O,"/created_discussions")),i()},de=()=>{R("/forum/profile/".concat(O,"/joined_discussions")),v()},ue=()=>{R("/forum/profile/".concat(O,"/user_activity")),p()},me=()=>{R("/forum/profile/".concat(O,"/notifications")),g()},fe=()=>{"function"===typeof Z&&Z([])},ve=()=>{oe((e=>!e))},he=()=>{q((e=>!e))},xe=(null===W||void 0===W?void 0:W.createdAt)||"",je=new Date(xe).toLocaleDateString("en-US",{year:"numeric",month:"long"});return(0,h.jsxs)(h.Fragment,{children:[le&&(0,h.jsx)(j.Z,{onClick:ve}),V&&(0,h.jsx)(f.Z,{onClick:he,tagsData:L}),(0,h.jsxs)("div",{className:"forum-category-page-filter-nav ".concat(E),children:[A?(0,h.jsx)(h.Fragment,{children:O&&(0,h.jsxs)("div",{className:"forum-category-page-row1",children:[(0,h.jsxs)("div",{className:"forum-category-page-row1-row1",children:[(0,h.jsx)("img",{src:W.profile_pic||d,alt:"",className:"forum-profile-pic"}),(0,h.jsxs)("div",{className:"user-display-name",children:[(0,h.jsx)("p",{children:W.display_name}),(0,h.jsxs)("small",{children:["Joined in\xa0",je]})]})]}),(0,h.jsxs)("ul",{className:"forum-profile-menu",children:[(0,h.jsxs)("li",{onClick:re,children:["Created Discussions ",(0,h.jsxs)("span",{className:"forum-activity-counter",children:["(",Q,")"]})]}),(0,h.jsxs)("li",{onClick:de,children:["Joined Discussions ",(0,h.jsxs)("span",{className:"forum-activity-counter",children:["(",$,")"]})]}),(0,h.jsx)("li",{onClick:ue,children:"Latest Activity"}),M===U?(0,h.jsxs)("li",{onClick:me,className:"forum-notifications",children:["Notifications ",se.totalCount>0&&(0,h.jsx)("div",{className:"forum-notification-counter",children:se.totalCount})]}):null]})]})}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"forum-category-page-row1 not-authenticated",children:[(0,h.jsx)("p",{children:"Join our community, elevate your marketplace experience!"}),(0,h.jsx)("button",{type:"button",className:"forum-login-btn",onClick:ve,children:"Sign In"}),(0,h.jsxs)("p",{children:["Don\u2019t have a Yogeek account? ",(0,h.jsx)(r.rU,{to:"/registerbyemail",children:"Sign up"})]})]}),O&&(0,h.jsxs)("div",{className:"forum-category-page-row1",children:[(0,h.jsxs)("div",{className:"forum-category-page-row1-row1",children:[(0,h.jsx)("img",{src:W.profile_pic||d,alt:"",className:"forum-profile-pic"}),(0,h.jsxs)("div",{className:"user-display-name",children:[(0,h.jsx)("p",{children:W.display_name}),(0,h.jsxs)("small",{children:["Joined in\xa0",je]})]})]}),(0,h.jsxs)("ul",{className:"forum-profile-menu",children:[(0,h.jsxs)("li",{onClick:re,children:["Created Discussions ",(0,h.jsxs)("span",{className:"forum-activity-counter",children:["(",Q,")"]})]}),(0,h.jsxs)("li",{onClick:de,children:["Joined Discussions ",(0,h.jsxs)("span",{className:"forum-activity-counter",children:["(",$,")"]})]}),(0,h.jsx)("li",{onClick:ue,children:"Latest Activity"}),M===U?(0,h.jsxs)("li",{onClick:me,className:"forum-notifications",children:["Notifications ",se.totalCount>0&&(0,h.jsx)("div",{className:"forum-notification-counter",children:se.totalCount})]}):null]})]})]}),J&&(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:"forum-sortby",children:[(0,h.jsx)("label",{children:"SORT BY"}),(0,h.jsx)(u.Z,{data:_,onOptionSelect:D,className:"forum-sortby-dropdown-select"})]})}),(0,h.jsxs)("div",{className:"forum-category-page-row2",children:[(0,h.jsx)("div",{className:"section-label-container",children:(0,h.jsx)("label",{children:"CATEGORIES"})}),(0,h.jsxs)("div",{className:"forum-category-btn-container",children:[ae&&(0,h.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"3px"},children:(0,h.jsx)(x,{menus:8})}),null===F||void 0===F||null===(s=F.categories)||void 0===s?void 0:s.map((e=>(0,h.jsx)(r.OL,{activeclassname:"active",className:"forum-category-menu",to:"/forum/category/".concat(e.id,"/").concat(e.name),onClick:fe,children:e.name},e.id)))]})]}),(0,h.jsxs)("div",{className:"forum-category-page-row3",children:[(0,h.jsx)("div",{className:"section-label-container",children:(0,h.jsx)("label",{children:"POPULAR TAGS"})}),(0,h.jsxs)("div",{className:"forum-category-btn-container",children:[ne&&(0,h.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"3px"},children:(0,h.jsx)(x,{menus:8})}),L.slice(0,10).map((e=>(0,h.jsx)(m.Z,{onClick:()=>{return s=e.id,void G((e=>{const i=e.includes(s)?e.filter((e=>e!==s)):[...e,s];return"function"===typeof Z&&Z([]),R("/forum/filtertags",{state:{selectedTags:i}}),i}));var s},label:e.name,className:"tag-btn ".concat(Y.includes(e.id)?"active":"")},e.id))),(0,h.jsxs)("div",{className:"more-tags",style:{justifyContent:Y.length>0?"space-between":"end"},children:[Y&&Y.length>0&&(0,h.jsx)("button",{onClick:()=>{const e=[];G(e),R("/forum/filtertags",{state:{selectedTags:e}})},children:"Clear all"}),(0,h.jsx)("button",{onClick:he,children:"Select more tags"})]})]})]})]})]})}},1722:(e,s,i)=>{i.r(s),i.d(s,{default:()=>O});var a=i(2791),t=i(7689),n=i(9434),c=i(2892),l=i(1663),o=i(6704),r=i(3437),d=(i(4564),i(7385),i(1757)),u=i(5089),m=i(3220),f=i(4601),v=i(3545),h=i(953),x=i(5219),j=i(1087),p=i(9088),g=i(5864),N=i(7318),y=i(5143),b=i(184);const w=e=>{let{data:s}=e;const i=e=>{if("string"!==typeof e)return"Invalid date";const s=new Date(e);return isNaN(s.getTime())?"Invalid date":(0,l.Z)(s,{addSuffix:!0,locale:o.Z})};return(0,b.jsx)(b.Fragment,{children:null===s||void 0===s?void 0:s.map((e=>{var s,a,t;return(0,b.jsxs)("div",{className:"forum-discussion-card",children:[(0,b.jsxs)("div",{className:"forum-discussion-card-row1",children:[(0,b.jsx)(j.rU,{to:"/forum/profile/".concat(null===e||void 0===e?void 0:e.user_id,"/created_discussions"),children:(0,b.jsx)("img",{src:(null===e||void 0===e||null===(s=e.discussionStarter)||void 0===s?void 0:s.profile_pic)||y,alt:""})}),(0,b.jsxs)("div",{className:"forum-discussion-info",children:[(0,b.jsx)(j.rU,{to:"/forum/discussion/".concat(null===e||void 0===e?void 0:e.discussion_id),children:(0,b.jsx)("h6",{children:null===e||void 0===e?void 0:e.title})}),(0,b.jsxs)("small",{children:["by\xa0",(0,b.jsx)(j.rU,{to:"/forum/profile/".concat(null===e||void 0===e?void 0:e.user_id,"/created_discussions"),children:null===e||void 0===e||null===(a=e.discussionStarter)||void 0===a?void 0:a.display_name}),"\xa0",i(null===e||void 0===e?void 0:e.created_at)]})]})]}),null===e||void 0===e||null===(t=e.post)||void 0===t?void 0:t.map((s=>{var i;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"forum-discussion-card-row2",children:(0,b.jsx)("div",{dangerouslySetInnerHTML:{__html:null===s||void 0===s?void 0:s.content}})},null===s||void 0===s?void 0:s.post_id),(0,b.jsx)("div",{className:"forum-discussion-card-row3",children:(0,b.jsxs)("div",{className:"view-reply-like-counter",children:[(0,b.jsxs)("div",{className:"like-counter",children:[(0,b.jsx)("div",{className:"like-msg-icon",children:(0,b.jsx)(p.r,{})}),(0,b.jsxs)("span",{children:[(null===s||void 0===s?void 0:s.likes.length)||0," likes"]})]}),(0,b.jsxs)("div",{className:"reply-counter",children:[(0,b.jsx)("div",{className:"reply-msg-icon",children:(0,b.jsx)(g.r,{})}),(0,b.jsxs)("span",{children:[null===e||void 0===e?void 0:e.totalReplies," replies"]})]}),(0,b.jsxs)("div",{className:"view-counter",children:[(0,b.jsx)("div",{className:"view-msg-icon",children:(0,b.jsx)(N.r,{})}),(0,b.jsxs)("span",{children:[null===e||void 0===e||null===(i=e.post[0])||void 0===i?void 0:i.views," views"]})]})]})})]})}))]},null===e||void 0===e?void 0:e.discussion_id)}))})};var C=i(7531),k=i(7497),S=i(5805),_=i(314),D=i(3615),Z=i(1842),E=i(2529),T=i(9401),A=i(3052),F=i(1296),L=i(8558);const O=()=>{var e;const s=(0,n.v9)((e=>e.user.data)),i=(0,n.v9)((e=>e.forumcategories.data)),j=(0,n.v9)((e=>e.forumtags.data)),p=(0,n.I0)(),g=(0,t.TH)(),N=(0,t.s0)(),[O,I]=(0,a.useState)({}),[U,M]=(0,a.useState)([]),[R,P]=(0,a.useState)([]),[J,H]=(0,a.useState)(0),[B,K]=(0,a.useState)([]),[Y,G]=(0,a.useState)([]),[V,q]=(0,a.useState)(!0),[W,z]=(0,a.useState)(!1),[Q,X]=(0,a.useState)(!1),[$,ee]=(0,a.useState)(""),[se,ie]=(0,a.useState)([]),[ae,te]=(0,a.useState)(""),[ne,ce]=(0,a.useState)([j]),[le,oe]=(0,a.useState)(!1),[re,de]=(0,a.useState)(""),[ue,me]=(0,a.useState)(""),[fe,ve]=(0,a.useState)(""),[he,xe]=(0,a.useState)(0),[je,pe]=(0,a.useState)(!1),[ge,Ne]=(0,a.useState)({}),[ye,be]=(0,a.useState)(1),[we]=(0,a.useState)(10),[Ce,ke]=(0,a.useState)(!1),[Se,_e]=(0,a.useState)(!0),De=(0,a.useRef)(),Ze=(0,a.useRef)(),Ee=(0,a.useRef)(),Te=(0,a.useRef)(),[Ae,Fe]=(0,a.useState)([]),[Le,Oe]=(0,a.useState)([]),Ie=["Most Recent","Most Viewed","Most Liked"].map((e=>({label:e,value:e.toLowerCase()})));(0,a.useEffect)((()=>{p((0,r.P)())}),[p]),(0,a.useEffect)((()=>{g.state&&g.state.activeTab&&H(g.state.activeTab)}),[g.state]),(0,a.useEffect)((()=>{g.state&&g.state.hasOwnProperty("discussionFilter")&&q(g.state.discussionFilter)}),[g.state]),(0,a.useEffect)((()=>{const e=e=>{Ze.current&&!Ze.current.contains(e.target)&&X(!1),Ee.current&&!Ee.current.contains(e.target)&&(oe(!1),te("")),!Te.current||Te.current.contains(e.target)||e.target.closest(".dots-container")||pe(!1)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[]),(0,a.useEffect)((()=>{(async()=>{try{const e=await c.Z.get("/api/total-forum-notifications");Ne(e.data.totalCount)}catch(e){console.log("Error fetching total unread notifications",e)}})()}),[U]),(0,a.useEffect)((()=>{(async()=>{if(!Ce&&Se){ke(!0);try{const e=(await c.Z.get("/api/forum-notifications/?page=".concat(ye,"&limit=").concat(we))).data;M((s=>{const i=e.filter((e=>!s.some((s=>s.id===e.id))));return[...s,...i]})),_e(e.length>0)}catch(e){console.log("Error fetching forum notifications:",e)}finally{ke(!1)}}})()}),[ye,we]);const Ue=(e,s)=>new Date(s.created_at)-new Date(e.created_at),Me=(e,s)=>{const i=e.post.reduce(((e,s)=>e+(s.views||0)),0);return s.post.reduce(((e,s)=>e+(s.views||0)),0)-i},Re=(e,s)=>{const i=e.post.reduce(((e,s)=>e+(s.likes?s.likes.length:0)),0);return s.post.reduce(((e,s)=>e+(s.likes?s.likes.length:0)),0)-i},Pe=[...B].sort(Ue),Je=[...B].sort(Me),He=[...B].sort(Re),Be=[...Y].sort(Ue),Ke=[...Y].sort(Me),Ye=[...Y].sort(Re),Ge=null===U||void 0===U?void 0:U.filter((e=>!1===e.read)),Ve=async e=>{try{await c.Z.put("/api/read-forum-notification/".concat(e),{read:!0}),M(U.map((s=>s.id===e?{...s,read:!0}:s)))}catch(s){console.error("Error marking notification as read:",s)}},qe=async e=>{try{await c.Z.delete("/api/delete-forum-notification/".concat(e)),M(U.filter((s=>s.id!==e)))}catch(s){console.error("Error deleting notification:",s)}},We=e=>{H(e)},ze=e=>{xe(e)},Qe=(null===s||void 0===s?void 0:s.createdAt)||"",Xe=new Date(Qe).toLocaleDateString("en-US",{year:"numeric",month:"long"});return(0,b.jsxs)(b.Fragment,{children:[W&&(0,b.jsx)(Z.Z,{onClick:()=>{z((e=>!e))}}),(0,b.jsxs)("div",{className:"forum-page-container",children:[(0,b.jsx)(u.Z,{}),(0,b.jsxs)("div",{className:"forum-profile-container",children:[(0,b.jsx)(f.Z,{paramsUserData:I,createdDiscussionsTab:()=>We(0),joinedDiscussionsTab:()=>We(1),userActivityTab:()=>We(2),forumNotificationsTab:()=>We(3),addDiscussionsBtn:()=>We(4),discussionFilter:V,createdDiscussionsData:K,joinedDiscussionsData:G,activitiesData:P,sortOptions:Ie,onOptionSelect:e=>{const s=(0===J?{"most recent":Pe,"most viewed":Je,"most liked":He}:{"most recent":Be,"most viewed":Ke,"most liked":Ye})[e.value];s&&(0===J?Fe(s):Oe(s))},notifications:U,className:"profile-filter-navigation"}),(0,b.jsxs)("div",{className:"forum-profile-page-col2",children:[(0,b.jsx)("div",{className:"language-selector-container",children:(0,b.jsx)(v.Z,{})}),(0,b.jsx)("div",{className:"profile-page-search-box-container",children:4!==J&&(0,b.jsx)(C.Z,{})}),(0,b.jsx)("div",{className:"smallscreennavmenu-container",children:4!==J&&(0,b.jsx)(L.Z,{})}),4!==J&&(0,b.jsxs)("div",{className:"profile-info-and-tab",children:[(0,b.jsxs)("div",{className:"profile-info-and-tab-row1",children:[(0,b.jsx)("img",{src:(null===O||void 0===O?void 0:O.profile_pic)||y,alt:"",className:"forum-profile-pic"}),(0,b.jsxs)("div",{className:"user-display-name",children:[(0,b.jsx)("p",{children:null===O||void 0===O?void 0:O.display_name}),(0,b.jsxs)("small",{children:["Joined in\xa0",Xe]})]})]}),(0,b.jsxs)("div",{className:"profile-info-and-tab-row2",children:[(0,b.jsx)("button",{onClick:()=>{N("/forum/profile/".concat(null===O||void 0===O?void 0:O.id,"/created_discussions")),H(0)},className:0===J&&"active",children:"Created Discussions"}),(0,b.jsx)("button",{onClick:()=>{N("/forum/profile/".concat(null===O||void 0===O?void 0:O.id,"/joined_discussions")),H(1)},className:1===J&&"active",children:"Joined Discussions"}),(0,b.jsx)("button",{onClick:()=>{N("/forum/profile/".concat(null===O||void 0===O?void 0:O.id,"/user_activity")),H(2)},className:2===J&&"active",children:"Activities"}),(null===O||void 0===O?void 0:O.id)===(null===s||void 0===s?void 0:s.id)&&(0,b.jsxs)("button",{onClick:()=>{N("/forum/profile/".concat(null===O||void 0===O?void 0:O.id,"/notifications")),H(3)},className:3===J&&"active",style:{display:"flex"},children:["Notifications  ",ge>0&&(0,b.jsx)("div",{className:"forum-notification-counter",children:ge})]})]})]}),(0,b.jsxs)("div",{className:"discussions-container",children:[(0,b.jsxs)("div",{className:"tab-content",style:{display:0===J?"flex":"none"},children:[(0,b.jsxs)("div",{className:"forum-profile-tab-title",children:[(0,b.jsxs)("h4",{children:["Created Discussions (",null===B||void 0===B?void 0:B.length,")"]}),(0,b.jsx)("div",{className:"start-discussion-btn-container",children:(0,b.jsx)(h.Z,{label:"Start a discussion"})})]}),Ae&&Ae.length>0?(0,b.jsx)(w,{data:Ae}):(0,b.jsx)(w,{data:B})]}),(0,b.jsxs)("div",{className:"tab-content",style:{display:1===J?"flex":"none"},children:[(0,b.jsxs)("div",{className:"forum-profile-tab-title",children:[(0,b.jsxs)("h4",{children:["Joined Discussions (",null===Y||void 0===Y?void 0:Y.length,")"]}),(0,b.jsx)("div",{className:"start-discussion-btn-container",children:(0,b.jsx)(h.Z,{label:"Start a discussion"})})]}),Le&&Le.length>0?(0,b.jsx)(x.Z,{data:Le}):(0,b.jsx)(x.Z,{data:Y})]}),(0,b.jsxs)("div",{className:"tab-content",style:{display:2===J?"flex":"none"},children:[(0,b.jsxs)("div",{className:"forum-profile-tab-title",children:[(0,b.jsx)("h4",{children:"Latest Activity"}),(0,b.jsx)("div",{className:"start-discussion-btn-container",children:(0,b.jsx)(h.Z,{label:"Start a discussion"})})]}),0===(null===R||void 0===R?void 0:R.length)?(0,b.jsxs)("div",{className:"no-activity",children:[null===O||void 0===O?void 0:O.display_name," don't have any activity"]}):(0,b.jsx)("ul",{children:null===R||void 0===R?void 0:R.map((e=>{var s;return(0,b.jsx)("li",{children:(0,b.jsxs)("div",{className:"activity-container",children:[(0,b.jsx)("div",{className:"user-avatar",children:(0,b.jsx)("img",{src:(null===e||void 0===e||null===(s=e.SubjectUser)||void 0===s?void 0:s.profile_pic)||y,alt:""})}),(0,b.jsxs)("div",{className:"activity-info",children:[(0,b.jsx)("div",{children:(0,b.jsx)("span",{dangerouslySetInnerHTML:{__html:e.message}})}),(0,b.jsx)("div",{className:"date",children:(0,l.Z)(new Date(e.createdAt),{addSuffix:!0,locale:o.Z})})]})]})},null===e||void 0===e?void 0:e.id)}))})]}),(0,b.jsxs)("div",{className:"tab-content",style:{display:3===J?"flex":"none"},children:[(0,b.jsxs)("div",{className:"forum-profile-tab-title",children:[(0,b.jsx)("h4",{children:"Notifications"}),(0,b.jsx)("div",{className:"start-discussion-btn-container",children:(0,b.jsx)(h.Z,{label:"Start a discussion"})})]}),(0,b.jsxs)("div",{className:"notifications-tab",children:[(0,b.jsxs)("div",{className:"notifications-tab-container",children:[(0,b.jsx)("button",{className:"all-notif-tab ".concat(0===he?"active":""),onClick:()=>ze(0),children:"ALL"}),(0,b.jsx)("button",{className:"unread-notif-tab ".concat(1===he?"active":""),onClick:()=>ze(1),children:"UNREAD"})]}),(0,b.jsxs)("div",{className:"dots-container",onClick:()=>{pe(!je)},children:[(0,b.jsx)("div",{className:"three-dots",children:(0,b.jsx)(E.r,{})}),je&&(0,b.jsx)("div",{className:"three-dots-dropdown-options",ref:Te,children:(0,b.jsxs)("ul",{children:[(0,b.jsx)("li",{onClick:async()=>{try{await c.Z.put("/api/read-all-forum-notifications",{read:!0}),M(U.map((e=>({...e,read:!0}))))}catch(e){console.error("Error marking all notifications as read:",e)}},children:(0,b.jsx)("span",{children:"Mark All as Read"})}),(0,b.jsx)("li",{onClick:async()=>{try{await c.Z.delete("/api/delete-all-forum-notifications"),M([])}catch(e){console.error("Error deleting all notifications",e)}},children:(0,b.jsx)("span",{children:"Clear All Notifications"})})]})})]})]}),0===U.length?(0,b.jsx)("div",{style:{display:0===he?"block":"none"},className:"no-notif",children:"You don't have any notifications"}):(0,b.jsxs)("div",{style:{display:0===he?"block":"none"},children:[(0,b.jsx)("ul",{children:U.map((e=>(0,b.jsxs)("li",{children:[(0,b.jsx)("div",{className:"delete-notif-btn",onClick:()=>qe(e.id),children:(0,b.jsx)("i",{class:"fa fa-times"})}),(0,b.jsxs)("div",{className:"notification-container",onClick:()=>Ve(e.id),children:[(0,b.jsx)("div",{className:"user-avatar",children:(0,b.jsx)("img",{src:e.subject_User.profile_pic,alt:""})}),(0,b.jsxs)("div",{className:"notification-info",children:[(0,b.jsx)("div",{children:(0,b.jsx)("span",{dangerouslySetInnerHTML:{__html:e.message}})}),(0,b.jsx)("div",{className:"date",children:(0,l.Z)(new Date(e.createdAt),{addSuffix:!0,locale:o.Z})})]}),!e.read&&(0,b.jsx)("div",{className:"circle-container",children:(0,b.jsx)("div",{className:"circle"})})]})]},e.id)))}),Se&&!Ce&&(0,b.jsx)("div",{ref:e=>{Ce||(De.current&&De.current.disconnect(),De.current=new IntersectionObserver((e=>{e[0].isIntersecting&&be((e=>e+1))})),e&&De.current.observe(e))},style:{height:"20px",backgroundColor:"transparent"}}),Ce&&(0,b.jsx)("div",{className:"infinite-scroll-loading-spinner",children:(0,b.jsx)(T.r,{})}),!Se&&(0,b.jsx)("div",{className:"no-more-data",children:"No more data to load"})]}),0===Ge.length?(0,b.jsx)("div",{className:"no-notif",style:{display:1===he?"block":"none"},children:"You don't have unread notifications"}):(0,b.jsx)("div",{style:{display:1===he?"block":"none"},children:(0,b.jsx)("ul",{children:Ge.map((e=>(0,b.jsxs)("li",{children:[(0,b.jsx)("div",{className:"delete-notif-btn",onClick:()=>qe(e.id),children:(0,b.jsx)("i",{class:"fa fa-times"})}),(0,b.jsxs)("div",{className:"notification-container",onClick:()=>Ve(e.id),children:[(0,b.jsx)("div",{className:"user-avatar",children:(0,b.jsx)("img",{src:e.subject_User.profile_pic,alt:""})}),(0,b.jsxs)("div",{className:"notification-info",children:[(0,b.jsx)("div",{children:(0,b.jsx)("span",{dangerouslySetInnerHTML:{__html:e.message}})}),(0,b.jsx)("div",{className:"date",children:(0,l.Z)(new Date(e.createdAt),{addSuffix:!0,locale:o.Z})})]}),!e.read&&(0,b.jsx)("div",{className:"circle-container",children:(0,b.jsx)("div",{className:"circle"})})]})]},e.id)))})})]}),(0,b.jsxs)("div",{className:"tab-content",style:{display:4===J?"flex":"none"},children:[(0,b.jsxs)("div",{className:"ss-add-new-discussion-nav-btns",children:[(0,b.jsx)(A.Z,{}),(0,b.jsx)(F.Z,{label:"Popular Tags"})]}),(0,b.jsx)("div",{className:"forum-profile-tab-title",children:(0,b.jsx)("h4",{children:"Add New Discussions"})}),(0,b.jsxs)("form",{className:"add-discussion-form",children:[(0,b.jsxs)("div",{className:"add-discussion-form-field-container",children:[(0,b.jsx)("label",{htmlFor:"",children:"Title"}),(0,b.jsx)(S.Z,{className:"discussion-title-box",placeholder:"Type discussion title",value:re,onChange:e=>de(e.target.value)})]}),(0,b.jsxs)("div",{className:"add-discussion-form-field-container",children:[(0,b.jsx)("label",{htmlFor:"",children:"Category"}),(0,b.jsxs)("div",{className:"wrapper",ref:Ze,children:[(0,b.jsx)("div",{className:"drop-down-arrow ".concat(Q&&"active"),onClick:()=>{X(!Q)}}),(0,b.jsx)("div",{className:"drop-down-forum-category",children:(0,b.jsx)("input",{type:"text",className:"discussion-select-box",placeholder:"Select category",value:$,readOnly:!0})}),Q&&(0,b.jsx)("div",{className:"drop-down-forum-category-container",children:(0,b.jsx)("ul",{className:"drop-down-forum-category-options",children:null===i||void 0===i||null===(e=i.categories)||void 0===e?void 0:e.map((e=>(0,b.jsxs)("li",{className:"forum-main-category",children:[(0,b.jsx)("div",{className:"parent-forum-category",children:e.name}),(0,b.jsx)("ul",{className:"forum-subcategory",children:e.subcategories.map((e=>(0,b.jsx)("li",{onClick:()=>{return s=e.id,i=e.name,ve(s),ee(i),void X(!1);var s,i},children:(0,b.jsx)("div",{className:"first-level-forum-subcategory",children:e.name})},e.id)))})]},e.id)))})})]})]}),(0,b.jsxs)("div",{className:"add-discussion-form-field-container",children:[(0,b.jsx)("label",{htmlFor:"",children:"Message"}),(0,b.jsx)(k.Z,{id:"newDiscussion",name:"newDiscussion",className:"new-discussion-message",value:ue,onChange:e=>me(e),rows:5})]}),(0,b.jsxs)("div",{className:"add-discussion-form-field-container",children:[(0,b.jsx)("label",{htmlFor:"",children:"Tags"}),(0,b.jsxs)("div",{className:"tags-input-container",ref:Ee,children:[(0,b.jsxs)("ul",{className:"tags-list",children:[se.map(((e,s)=>(0,b.jsxs)("li",{className:"tag",children:[e.tag_name,(0,b.jsx)("button",{type:"button",onClick:()=>{return s=e,void ie(se.filter((e=>e.tag_id!==s.tag_id)));var s},className:"remove-tag-button",children:"\xd7"})]},s))),(0,b.jsx)("li",{className:"input-tags-container",children:(0,b.jsx)("input",{type:"text",value:ae,onChange:e=>{const s=e.target.value;if(te(s),""!==s.trim()){const e=new Set(se.map((e=>e.tag_id)));ce(j.filter((i=>i.name.toLowerCase().includes(s.toLowerCase())&&!e.has(i.id)))),oe(!0)}else ce([]),oe(!1)},placeholder:"Search or select tags",className:"tags-input"})})]}),le&&ne.length>0&&(0,b.jsx)("ul",{className:"dropdown-list",children:ne.map(((e,s)=>(0,b.jsx)("li",{onClick:()=>{return s=e.id,i=e.name,void(se.some((e=>e.tag_id===s))||(ie([...se,{tag_id:s,tag_name:i}]),te(""),oe(!1)));var s,i},children:e.name},s)))})]})]}),(0,b.jsxs)("div",{className:"add-discussion-button-container",children:[(0,b.jsx)(_.Z,{label:"Post Discussion",onClick:async e=>{if(e.preventDefault(),s||z(!0),fe&&re&&ue)try{p((0,d.P)(!0));const e=await c.Z.post("/api/create/newdiscussion",{forum_category_id:fe,title:re,content:ue,discussionTags:se.map((e=>({tag_id:e.tag_id})))});de(""),ve(""),ee(""),me(""),ie([]);const s=e.data.discussion_id;window.location.href="/forum/discussion/".concat(s)}catch(i){console.error("Error adding the discussion:",i)}finally{p((0,d.P)(!1))}else console.error("Category, title, and content are required.")}}),(0,b.jsx)(D.Z,{label:"Clear",onClick:e=>{e.preventDefault(),de(""),ve(""),ee(""),me(""),ie([])}})]})]})]})]})]})]}),(0,b.jsx)(m.Z,{className:"forum-profile-footer"})]})]})}},7385:(e,s,i)=>{i.d(s,{l:()=>n});var a=i(672),t=i(2892);const n=()=>async e=>{try{const s=await t.Z.get("/api/fetchforumtags");if(200===s.status){const i=s.data;e((0,a.mG)(i))}}catch(s){console.error("Error fetching forum tags:",s),e((0,a.sT)("Error fetching forum tags."))}}},4166:()=>{}}]);
//# sourceMappingURL=5660.8e04897a.chunk.js.map